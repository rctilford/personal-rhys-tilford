<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rhys Tilford">
<meta name="dcterms.date" content="2023-11-13">
<meta name="description" content="Read about how I used R to tidy and display urban transport data">

<title>Tidying Unkempt Data – personal-rhys-tilford</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/embosser.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-5R6TTB9D5X"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5R6TTB9D5X', { 'anonymize_ip': true});
</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../../site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../../site_libs/dt-core-bootstrap-1.13.6/css/dataTables.bootstrap.min.css" rel="stylesheet">

<link href="../../site_libs/dt-core-bootstrap-1.13.6/css/dataTables.bootstrap.extra.css" rel="stylesheet">

<script src="../../site_libs/dt-core-bootstrap-1.13.6/js/jquery.dataTables.min.js"></script>

<script src="../../site_libs/dt-core-bootstrap-1.13.6/js/dataTables.bootstrap.min.js"></script>

<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title"><svg class="logo" viewbox="-60 -65 250 250"><path></path><circle id="c1"></circle><circle id="c2"></circle><circle id="c3"></circle></svg></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Lore</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../articles/index.html"> 
<span class="menu-text">Articles</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/rhystilford" target="_blank"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rctilford" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The Data</a></li>
  <li><a href="#tidying" id="toc-tidying" class="nav-link" data-scroll-target="#tidying">Tidying</a></li>
  <li><a href="#ridership-data-analysis" id="toc-ridership-data-analysis" class="nav-link" data-scroll-target="#ridership-data-analysis">Ridership Data Analysis</a></li>
  <li><a href="#system-size-data-analysis" id="toc-system-size-data-analysis" class="nav-link" data-scroll-target="#system-size-data-analysis">System Size Data Analysis</a></li>
  <li><a href="#system-maturity-data-analysis" id="toc-system-maturity-data-analysis" class="nav-link" data-scroll-target="#system-maturity-data-analysis">System Maturity Data Analysis</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tidying Unkempt Data</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Data Analysis</div>
    <div class="quarto-category">Programming</div>
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    Read about how I used R to tidy and display urban transport data
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rhys Tilford </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 13, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-startfrom="10" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 9;"><span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>Plot <span class="op">=</span> <span class="im">import</span>(<span class="st">"https://esm.run/@observablehq/plot@0.6.11"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>Transport has always been a passion of mine. I have always adored Trains, Planes, Cars, Boats, and any other type of vehicle. As I matured I began to see transit through a new lens. The sights and sounds of large transport-oriented machinary no longer held my attention like they once did. A more humanistic view of transport caught my fancy and I began to take interest in transport equity for people from all socio-economic backgrounds.</p>
<p>It is well known that the automobile is a focal point in American society. That said, I was well into my teens before I noticed the consequences our car-centric culture causes for people who either can’t afford to own a car or choose not to own a car. This realization invigorated my interest in public transport and walkable infrastructure. In this data exploration, I hope to shed some light on the state of urban rail transport systems in America and compare them to that of other first world countries.</p>
</section>
<section id="the-data" class="level3">
<h3 class="anchored" data-anchor-id="the-data">The Data</h3>
<p>I found a fascinating data table on <a href="https://en.wikipedia.org/wiki/List_of_metro_systems">this</a> Wikipedia page so I decided to pull it and analize it. Here is the code I used to pull it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>web_page <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/List_of_metro_systems"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Tables <span class="ot">&lt;-</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  web_page <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">"table"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>MetroList <span class="ot">&lt;-</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  Tables <span class="sc">%&gt;%</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">pluck</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Much to my dismay the data was riddled with miscellaneous junk. Here is the data inside MetroList:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-cf42cb9bb624addf7c16" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-cf42cb9bb624addf7c16">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208"],["Algiers","Buenos Aires","Yerevan","Sydney","Vienna","Baku","Dhaka","Minsk","Brussels","Belo Horizonte","Brasília","Fortaleza","Porto Alegre","Recife","Rio de Janeiro","Salvador","São Paulo","Sofia","Montreal","Montreal","Toronto","Vancouver","Santiago","Beijing","Changchun","Changsha","Changzhou","Chengdu","Chongqing","Dalian","Dongguan","Foshan","Fuzhou","Guangzhou","Guiyang","Hangzhou","Harbin","Hefei","Hohhot","Hong Kong","Jinan","Jinhua","Kunming","Lanzhou","Luoyang","Nanchang","Nanjing","Nanning","Nantong","Ningbo","Qingdao","Shanghai","Shaoxing","Shenyang","Shenzhen","Shijiazhuang","Suzhou","Taiyuan","Taizhou","Tianjin","Ürümqi","Wenzhou","Wuhan","Wuxi","Xiamen","Xi'an","Xuzhou","Zhengzhou","Medellín","Prague","Copenhagen","Santo Domingo","Quito","Cairo","Helsinki","Lille","Lyon","Marseille","Paris","Rennes","Toulouse","Tbilisi","Berlin","Hamburg","Munich","Nuremberg","Athens","Budapest","Ahmedabad","Bangalore","Chennai","Delhi","Gurgaon","Hyderabad","Jaipur","Kanpur","Kochi","Kolkata","Lucknow","Mumbai","Nagpur","Noida","Pune","Navi Mumbai","Jakarta","Isfahan","Mashhad","Shiraz","Karaj","Tabriz","Tehran","Brescia","Catania","Genoa","Milan","Naples","Rome","Turin","Fukuoka","Hiroshima","Kobe","Kyoto","Nagoya","Osaka","Sapporo","Sendai","Tokyo","Tokyo","Tokyo","Yokohama","Yokohama","Almaty","Pyongyang","Busan","Daegu","Daejeon","Gwangju","Incheon","Seoul","Seoul","Seoul","Kuala Lumpur","Guadalajara","Mexico City","Monterrey","Amsterdam","Rotterdam","Lagos","Oslo","Lahore","Panama City","Lima","Manila","Manila","Warsaw","Lisbon","Doha","Bucharest","Kazan","Moscow","Nizhny Novgorod","Novosibirsk","Saint Petersburg","Samara","Yekaterinburg","Singapore","Barcelona","Bilbao","Madrid","Stockholm","Lausanne","Kaohsiung","Taipei","Taichung","Taoyuan","Bangkok","Bangkok","Adana","Ankara","Bursa","Istanbul","İzmir","Dnipro","Kharkiv","Kyiv","Dubai","Glasgow","London","London","Atlanta","Baltimore","Boston","Chicago","Cleveland","Honolulu","Los Angeles","Miami","New York City","New York City","New York City","Philadelphia","Philadelphia","San Francisco (Bay Area)","San Juan","Washington, D.C.","Tashkent","Caracas","Hanoi"],["Algeria","Argentina","Armenia","Australia","Austria","Azerbaijan","Bangladesh","Belarus","Belgium","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Bulgaria","Canada","Canada","Canada","Canada","Chile","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","Colombia","Czech Republic","Denmark","Dominican Republic","Ecuador","Egypt","Finland","France","France","France","France","France","France","Georgia","Germany","Germany","Germany","Germany","Greece","Hungary","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","Indonesia","Iran","Iran","Iran","Iran","Iran","Iran","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Kazakhstan","North Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Malaysia","Mexico","Mexico","Mexico","Netherlands","Netherlands","Nigeria","Norway","Pakistan","Panama","Peru","Philippines","Philippines","Poland","Portugal","Qatar","Romania","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Singapore","Spain","Spain","Spain","Sweden","Switzerland","Taiwan","Taiwan","Taiwan","Taiwan","Thailand","Thailand","Turkey","Turkey","Turkey","Turkey","Turkey","Ukraine","Ukraine","Ukraine","United Arab Emirates","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","Uzbekistan","Venezuela","Vietnam"],["Algiers Metro","Buenos Aires Underground","Yerevan Metro","Sydney Metro","Vienna U-Bahn","Baku Metro","Dhaka Metro Rail","Minsk Metro","Brussels Metro","Belo Horizonte Metro","Federal District Metro","Fortaleza Metro[Nb 6]","Porto Alegre Metro","Recife Metro[Nb 7]","Rio de Janeiro Metro","Salvador Metro","São Paulo Metro","Sofia Metro","Montreal Metro","Réseau express métropolitain","Toronto Subway[59]","SkyTrain","Santiago Metro","Beijing Subway[69]","Changchun Rail Transit","Changsha Metro","Changzhou Metro","Chengdu Metro","Chongqing Rail Transit","Dalian Metro[79]","Dongguan Rail Transit","Foshan Metro[Nb 16]","Fuzhou Metro","Guangzhou Metro[Nb 17]","Guiyang Metro","Hangzhou Metro[88]","Harbin Metro","Hefei Metro","Hohhot Metro","Mass Transit Railway","Jinan Metro","Jinhua Rail Transit","Kunming Metro","Lanzhou Metro","Luoyang Subway","Nanchang Metro","Nanjing Metro[108]","Nanning Metro[112]","Nantong Metro","Ningbo Rail Transit[115]","Qingdao Metro","Shanghai Metro","Shaoxing Metro","Shenyang Metro","Shenzhen Metro","Shijiazhuang Metro","Suzhou Rail Transit","Taiyuan Metro","Taizhou Rail Transit","Tianjin Metro","Ürümqi Metro","Wenzhou Rail Transit","Wuhan Metro","Wuxi Metro","Xiamen Metro","Xi'an Metro","Xuzhou Metro","Zhengzhou Metro","Medellín Metro","Prague Metro","Copenhagen Metro","Santo Domingo Metro","Quito Metro","Cairo Metro[152]","Helsinki Metro","Lille Metro","Lyon Metro","Marseille Metro","Paris Métro","Rennes Metro","Toulouse Metro","Tbilisi Metro","Berlin U-Bahn","Hamburg U-Bahn","Munich U-Bahn","Nuremberg U-Bahn","Athens Metro[Nb 31]","Budapest Metro","Ahmedabad Metro","Namma Metro","Chennai Metro","Delhi Metro","Rapid Metro Gurgaon","Hyderabad Metro","Jaipur Metro","Kanpur Metro","Kochi Metro","Kolkata Metro","Lucknow Metro","Mumbai Metro","Nagpur Metro","Noida Metro","Pune Metro","Navi Mumbai Metro","Jakarta MRT","Isfahan Urban Railway","Mashhad Urban Railway","Shiraz Metro","Karaj Metro [fa]","Tabriz Metro","Tehran Metro","Brescia Metro","Catania Metro","Genoa Metro","Milan Metro","Naples Metro[Nb 42]","Rome Metro","Turin Metro","Fukuoka City Subway","Astram Line","Kobe Municipal Subway","Kyoto Municipal Subway","Nagoya Municipal Subway","Osaka Metro","Sapporo Municipal Subway","Sendai Subway","Toei Subway","Tokyo Metro","Rinkai Line","Yokohama Municipal Subway","Minatomirai Line","Almaty Metro","Pyongyang Metro","Busan Metro","Daegu Metro","Daejeon Metro","Gwangju Metro","Incheon Subway","Seoul Metropolitan Subway[Nb 51][Nb 52]","Korail metro lines[Nb 53][Nb 52]","Shinbundang Line[Nb 52] (Neo Trans)","Rapid KL[Nb 55]","Guadalajara Electric Rail System[Nb 57]","Mexico City Metro","Metrorrey","Amsterdam Metro","Rotterdam Metro[Nb 62]","Lagos Rail Mass Transit","Oslo Metro[Nb 63]","Lahore Metro","Panama Metro","Lima Metro","Manila Light Rail Transit System","Manila Metro Rail Transit System","Warsaw Metro","Lisbon Metro","Doha Metro","Bucharest Metro","Kazan Metro[320]","Moscow Metro[323]","Nizhny Novgorod Metro","Novosibirsk Metro","Saint Petersburg Metro","Samara Metro","Yekaterinburg Metro","Mass Rapid Transit","Barcelona Metro[Nb 70]","Metro Bilbao[Nb 72]","Madrid Metro[Nb 73]","Stockholm Metro","Lausanne Métro[Nb 75]","Kaohsiung Metro","Taipei Metro","Taichung Metro[350]","Taoyuan Metro","BTS Skytrain","Metropolitan Rapid Transit","Adana Metro","Ankara Metro","Bursaray","Istanbul Metro","İzmir Metro","Dnipro Metro","Kharkiv Metro","Kyiv Metro","Dubai Metro","Glasgow Subway","London Underground[372]","Docklands Light Railway","MARTA","Baltimore Metro SubwayLink","MBTA subway[Nb 81]","Chicago \"L\"[Nb 63]","Red Line (RTA Rapid Transit)","Skyline","Metro Rail[Nb 85]","Metrorail","New York City Subway","Staten Island Railway","PATH","SEPTA[397][Nb 91]","PATCO Speedline","BART[Nb 93]","Tren Urbano","Washington Metro","Tashkent Metro","Caracas Metro[Nb 97]","Hanoi Metro"],["2011[11]","1913[Nb 1]","1981[18]","2019[20]","1978[22][Nb 3]","1967[25]","2022[27]","1984[28]","1976[30]","1986[32]","2001[35]","2012[39]","1985[42]","1985[44]","1979[46]","2014[48]","1974[51]","1998[53]","1966[55]","2023[57]","1954[60]","1985[63]","1975[65]","1971[Nb 8]","2017[Nb 11]","2014[72]","2019[74]","2010","2004","2003","2016[81]","2010","2016[83]","1997","2017[86]","2012","2013[91]","2016[93]","2019[95]","1979[Nb 20]","2019[99]","2022[103]","2012","2019[105]","2021[101][106]","2015","2005","2016","2022[114]","2014","2015[117]","1993[119]","2021[121]","2010","2004","2017","2012","2020","2022[127]","1984","2018","2019[131]","2004","2014[134]","2017[136]","2011","2019[139]","2013[141]","1995[143]","1974[144]","2002[147]","2009","2023","1987","1982[154]","1983[158]","1978[160]","1977","1900[163]","2002","1993[167]","1966[169]","1902[173]","1912[178]","1971[181]","1972","1869[186][Nb 32]","1896","2019[191]","2011[194]","2015[199]","2002[203]","2013[207]","2017[209]","2015[211][212]","2021[213]","2017[214]","1984[217]","2017[220]","2014[222]","2019[226]","2019[228]","2022","2023","2019[229]","2015[230]","2011[233]","2014[237]","2023[238][Nb 36]","2015[240]","1999[241][Nb 38]","2013[245]","1999[247]","1990[250]","1964[251]","1993","1955","2006[259]","1981[261]","1994[263]","1977[263]","1981[263]","1957[263]","1933[267]","1971[263]","1987[271]","1960[273]","1927[276]","1996[263]","1972[280]","2004[263]","2011[281]","1973","1985","1997","2006","2004","1999","1974[288]","1994[Nb 54]","2011","1996","1994[Nb 58]","1969[296]","1991[298]","1977","1968","2023","1966[Nb 64]","2020[306]","2014","2011","1984[309]","1999","1995","1959[314]","2019[315]","1979[317]","2005","1935","1985","1986","1955","1987[329]","1991","1987","1924","1995[335]","1919[339]","1950[342][Nb 74]","2008[344]","2008","1996[346]","2021[351]","2017","1999[353]","2004[356]","2009","1997","2002","1989[363]","2000[366]","1995","1975","1960","2009[368]","1896[371]","1863[1][Nb 80]","1987[374]","1979[375]","1983[377]","1901[377][Nb 82]","1892[381][Nb 83]","1955[384]","2023","1993[386]","1984[387]","1904[389][Nb 87]","1925[377][Nb 89]","1908[394]","1907[377]","1936[377][Nb 92]","1972[401]","2004[377]","1976[403]","1977","1983[407]","2021[411]"],["2018[12]","2019[16]","1996[19]","–","2017[23]","2022[26]","2023","2020[28]","2009[Nb 4]","2002[32]","2020[36]","2013[40]","2014[42]","2009[44]","2016[47]","2023[49]","2021[52]","2021[54]","2007[55]","–","2017[60]","2016[64]","2023[66]","2023[70]","2023[71]","2023[73]","2021[75]","2020[76]","2023","2023[80]","–","2022[82]","2023[84]","2022[85]","2021[87]","2022[89]","2023[92]","2023[94]","2020[96]","2022","2021[100][101]","2023","2022[104]","2023","2021","2021[107]","2023[109]","2021[113]","–","2022[116]","2023[118]","2021[120]","2023","2023[122]","2022[123]","2021[124]","2023[125]","–","–","2022[129]","2019[130]","2023","2022[133]","2021[135]","2023[137]","2023[138]","2021[140]","2023[142]","2012[Nb 25]","2015[Nb 26]","2020[147]","2018[149]","–","2022[153]","2022[Nb 27][155]","2000[158]","2023","2019","2022[164]","2022","2007[167][Nb 28]","2017[170][Nb 29]","2021[174][175]","2019[179]","2010[Nb 30]","2020[182][183]","2022[187]","2014[189]","2022[192]","2023[195]","2021[200]","2023[204]","2017[208]","2020[210]","2020[212]","–","2022[215]","2022[218]","2019[221]","2023[223]","2022[227]","–","2023","–","–","2018[231][232]","2019[234]","2023[Nb 35]","–","2020","2023[242]","–","2021[Nb 40][248]","2012[250]","2023[251]","2021[Nb 43]","2018[255]","2021[260]","2023[262]","2015[264]","2001","2008","2011[266]","2006[267]","1999","2015[272]","2002[273]","2020[277]","2002","2008[280]","2008","2022[281]","1987[Nb 46]","2017[Nb 47]","2015[Nb 48]","2007[Nb 49]","2008[Nb 50]","2020[286]","2022[289]","2022[291]","2022[293]","2023[295]","2020","2012[Nb 59]","2021[299]","2018[301]","2023","–","2016[Nb 65]","–","2023[307]","2014[308]","2021[309]","2000","2022[313]","2016[314]","2019[316]","2023[318]","2018[321]","2023","2018[325]","2010[326]","2019[327]","2015[330]","2012[331]","2022[332]","2021[333]","2020[336][337]","2019[340]","1994[342]","–","2012","2020[347]","–","2023","2021[354]","2023[357]","2010","2023[360][Nb 77]","2014[Nb 78]","2023","2014[366]","–","2016","2013","2021[369]","–","2021[1]","2011[374]","2000[375]","1995[378]","2014[379]","2017[382]","1968[384]","–","2000[386][Nb 86]","2012","2017[390]","2017[392]","1937[Nb 90]","1973","1980[400]","2020[402]","2005","2023[404]","2023[Nb 96][405]","2015[408]","–"],["19[12]","78[Nb 2][17]","10[18]","13[20]","98[24]","27[25]","16","30[29]","59[30][Nb 5]","19[33]","27[37]","20[41]","22[43]","28[45]","41[46]","20[50]","89[52]","47[54]","68[56]","5","70[61]","53[64]","122[67]","370[Nb 9]","35[Nb 12]","135","43","284[Nb 14]","241[Nb 15]","99","15","61","90","254[Nb 18]","55","254[Nb 19]","65","136","43[95]","99[97]","40[99][102]","32","103","27[105]","33[101][106]","94","201[110]","93","28","116","150","403[Nb 21]","36","111","303[Nb 23]","60[124]","181","23","15","181","21","36","254[Nb 24]","80","70","191","51","157","27[143]","58[145]","39[148]","33[149][150][151]","15","74[152]","30[156]","60[159]","42[161]","29[162]","308[165]","28","37[168]","23[171]","175[176][175]","93[180]","96[181]","49[183]","66[188]","48","31","65[196]","42[201]","231[Nb 33]","11[208]","58[210]","11[212]","9","24","40[219]","21[220]","40[224]","36[227]","21","20","11","13","20[231]","35[235]","23","10[Nb 37]","18","162[Nb 39][243][244]","17[246]","10[249]","8[250]","113[Nb 41]","27[254]","73[256]","23[259][260]","36[262]","22","28","31[265]","87[266]","100[268]","46[270]","29[271]","99[Nb 45]","142[278]","8","40[280]","6","11","17","108","88[283]","22","20","56[287]","279[290]","86","16","128[Nb 56]","28","163[Nb 60]","38[300]","39[302]","71","5[304]","101","26","32","26","33[310]","13","39","50[314]","37[316]","57[Nb 67][319]","11[322]","207[Nb 68][324]","15[325]","14[322]","72[Nb 69][328]","10[322]","9[322]","134[332]","132[Nb 71][334]","42[338][337]","242[341]","100[343]","14","37[345]","119[Nb 76]","18[351]","22[352]","60[354]","75[358]","13[359]","57[361]","39[362]","128[Nb 79]","17[366]","6[367]","30[367]","52[367]","53","15[371]","272[373]","45[374]","38[376]","14[378]","51[380]","145[383]","18[385]","9","16[386][Nb 85]","23[388]","424[Nb 88]","21[389][393]","13[395]","72[397]","13[400]","47[401][Nb 94]","16","98[403]","48[406]","49[Nb 98]","12"],[1,7,1,1,5,1,1,3,4,1,2,2,1,3,3,2,6,4,4,1,3,3,7,27,2,6,2,13,10,6,1,3,5,16,2,13,3,5,2,10,3,2,6,2,2,4,13,5,1,5,7,19,2,5,16,3,6,1,1,8,1,2,11,4,3,9,3,9,2,3,4,2,1,3,2,2,4,2,16,2,2,2,9,4,8,3,3,4,2,2,2,10,1,3,1,1,1,3,1,3,2,1,2,1,1,1,2,2,6,1,6,1,1,1,5,4,3,1,3,1,3,2,6,8,3,2,4,9,1,2,1,1,2,6,3,1,1,2,7,3,1,5,1,12,3,5,5,1,5,1,2,1,2,1,2,4,3,5,1,19,2,2,5,1,1,6,12,3,13,7,2,3,5,1,1,3,8,1,3,2,11,1,1,3,3,2,1,11,7,4,2,3,8,1,1,2,2,28,1,4,2,1,5,1,6,4,4,1],["18.5 km (11.5 mi)[13]","56.7 km (35.2 mi)[17]","12.1 km (7.5 mi)[18]","36 km (22 mi)[20][21]","83.3 km (51.8 mi)[22]","40.7 km (25.3 mi)[25]","20.1 km (12.5 mi)","40.8 km (25.4 mi)[29]","39.9 km (24.8 mi)[31]","28.1 km (17.5 mi)[34]","42.4 km (26.3 mi)[37][38]","24.1 km (15.0 mi)[41]","43.8 km (27.2 mi)[43]","39.5 km (24.5 mi)[45]","58 km (36 mi)[47]","34 km (21 mi)","104.4 km (64.9 mi)[52]","52 km (32 mi)[54]","69.2 km (43.0 mi)[56]","16.6 km (10.3 mi)[58]","70.5 km (43.8 mi)[62]","79.6 km (49.5 mi)[64]","143 km (89 mi)[68]","785.7 km (488.2 mi)[70][Nb 10]","43 km (27 mi)[Nb 13]","207.9 km (129.2 mi)","54 km (33.55 mi)","517.8 km (321.7 mi)[77]","485 km (301 mi)[78]","237.7 km (147.7 mi)","37.7 km (23.4 mi)","112.7 km (70.0 mi)","143.5 km (89.2 mi)","617.1 km (383.4 mi)[85]","75.7 km (47.0 mi)[87]","516.2 km (320.8 mi)[90]","82.8 km (51.4 mi)","176.2 km (109.5 mi)","49 km (30 mi)[95]","174.7 km (108.6 mi)[98]","84.3 km (52.4 mi)[99][102]","118.5 km (73.6 mi)","164.3 km (102.1 mi)","35 km (22 mi)[105]","43.6 km (27.1 mi)[101]","128.3 km (79.7 mi)","498.7 km (309.9 mi)[111]","128.2 km (79.7 mi)","39.2 km (24.4 mi)","185.3 km (115.1 mi)","311.5 km (193.6 mi)","795.5 km (494.3 mi)[120][Nb 22]","57.8 km (35.9 mi)[121]","163.7 km (101.7 mi)","547.4 km (340.1 mi)","76.5 km (47.5 mi)[124]","249.5 km (155.0 mi)[125]","23.7 km (14.7 mi)[126]","52.4 km (32.6 mi)[128]","288.7 km (179.4 mi)","27.6 km (17.1 mi)","116.5 km (72.4 mi)[132]","460.9 km (286.4 mi)[133]","114.8 km (71.3 mi)","98.4 km (61.1 mi)","311 km (193 mi)","64.4 km (40.0 mi)","260.6 km (161.9 mi)","31.3 km (19.4 mi)[143]","65.4 km (40.6 mi)[146]","38.2 km (23.7 mi)[148]","31 km (19 mi)[150][151]","22.6 km (14.0 mi)","93.4 km (58.0 mi)[152]","43 km (27 mi)[157]","45 km (28 mi)[159]","34.4 km (21.4 mi)[161]","22.7 km (14.1 mi)[162]","226.9 km (141.0 mi)[166]","22.4 km (13.9 mi)","28.2 km (17.5 mi)[167]","27.3 km (17.0 mi)[172]","155.6 km (96.7 mi)[177]","106 km (66 mi)[180]","95 km (59 mi)[181]","38.4 km (23.9 mi)[183]","91.7 km (57.0 mi)[184]","39.2 km (24.4 mi)[189][190]","37.9 km (23.5 mi)[193]","73.81 km (45.86 mi)[197][198]","54.1 km (33.6 mi)[202]","351.3 km (218.3 mi)[Nb 34][205]","12.1 km (7.5 mi)[208]","67 km (42 mi)[210]","12 km (7.5 mi)[212]","8.73 km (5.42 mi)","26.8 km (16.7 mi)[216]","47.9 km (29.8 mi)[219]","22.9 km (14.2 mi)[220]","46.5 km (28.9 mi)[225]","38.2 km (23.7 mi)[227]","29.7 km (18.5 mi)","23.8 km (14.8 mi)","11.10 km (6.90 mi)","15.7 km (9.8 mi)","20.2 km (12.6 mi)[231]","37.5 km (23.3 mi)[236]","32.5 km (20.2 mi)","27.2 km (16.9 mi)[239][Nb 37]","17.2 km (10.7 mi)","274.1 km (170.3 mi)[Nb 39][243]","13.7 km (8.5 mi)[246]","8.8 km (5.5 mi)","7.1 km (4.4 mi)[250]","104.1 km (64.7 mi)[253]","30.8 km (19.1 mi)[254]","60 km (37 mi)[257][258]","15.1 km (9.4 mi)[260]","31.4 km (19.5 mi)[262]","18.4 km (11.4 mi)[263]","38.1 km (23.7 mi)[263]","31.2 km (19.4 mi)[263]","93.3 km (58.0 mi)[266]","129.9 km (80.7 mi)[267][269]","48 km (30 mi)[263]","28.7 km (17.8 mi)[271]","109 km (68 mi)[273]","195.1 km (121.2 mi)[279]","12.2 km (7.6 mi)[263]","53.4 km (33.2 mi)[280]","4.1 km (2.5 mi)[263]","13.4 km (8.3 mi)[281]","22.5 km (14.0 mi)","140.1 km (87.1 mi)[282]","82.9 km (51.5 mi)[283]","22.6 km (14.0 mi)[284]","20.1 km (12.5 mi)[285]","59.7 km (37.1 mi)[287]","345.3 km (214.6 mi)[290]","151.7 km (94.3 mi)[292]","33.4 km (20.8 mi)[294]","196.2 km (121.9 mi)","30 km (19 mi)","200.9 km (124.8 mi)[297][Nb 61]","40.2 km (25.0 mi)[300]","41.2 km (25.6 mi)","102.3 km (63.6 mi)[303]","13 km (8.1 mi)","85 km (53 mi)[305]","27.1 km (16.8 mi)[306]","37.8 km (23.5 mi)","34.4 km (21.4 mi)[308]","37.2 km (23.1 mi)[309][311]","16.9 km (10.5 mi)[312]","41.2 km (25.6 mi)","44.2 km (27.5 mi)[314]","76 km (47 mi)[Nb 66]","80.1 km (49.8 mi)[318]","16.8 km (10.4 mi)[322]","460.5 km (286.1 mi)[324]","21.4 km (13.3 mi)","15.9 km (9.9 mi)[322]","124.8 km (77.5 mi)[328]","11.6 km (7.2 mi)[322]","12.7 km (7.9 mi)[322]","230 km (140 mi)","128.3 km (79.7 mi)[334]","45.1 km (28.0 mi)[338]","293.9 km (182.6 mi)[341]","108 km (67 mi)[343]","5.9 km (3.7 mi)","42.7 km (26.5 mi)[345]","152.9 km (95.0 mi)[348]","16.7 km (10.4 mi)[351]","53.1 km (33.0 mi)","70.1 km (43.6 mi) [355]","101.4 km (63.0 mi)[358]","13.5 km (8.4 mi)[359]","67.4 km (41.9 mi)[360][361]","39 km (24 mi)[362]","199.26 km (123.81 mi)[364]","19.8 km (12.3 mi)[366]","7.8 km (4.8 mi)[367]","38.7 km (24.0 mi)[367]","67.7 km (42.1 mi)[367]","89.3 km (55.5 mi)[370]","10.4 km (6.5 mi)[371]","402 km (250 mi)[373]","34 km (21 mi)","76.6 km (47.6 mi)[376]","24.9 km (15.5 mi)[378]","63.9 km (39.7 mi)[380]","165.4 km (102.8 mi)[383][Nb 84]","31 km (19 mi)[385]","17.4 km (10.8 mi)","28 km (17 mi)[386]","39.3 km (24.4 mi)[388]","399 km (248 mi)[391]","22.5 km (14.0 mi)[391]","22.2 km (13.8 mi)[396]","59.1 km (36.7 mi)[398][399]","22.9 km (14.2 mi)[400]","192 km (119 mi)[401][Nb 95]","17.2 km (10.7 mi)","208 km (129 mi)","66.5 km (41.3 mi)[406]","67.2 km (41.8 mi)[Nb 98]","13.1 km (8.1 mi)"],["45.3 (2019)[R 1]","74 (2020)[R 2]","23.3 (2022)[R 3]","19.7 (2022)[R 4][R 5][R Nb 1]","459.8 (2019)[R 6]","202.5 (2022)[R 3]","n/a","225.9 (2022)[R 3]","129.2 (2022)[R 7]","54.4 (2019)[R 8]","39.1 (2022)[R 9]","8.9 (2022)[R 10]","31.9 (2022)[R 11]","93.5 (2019)[R 12]","118.7 (2020)[R 13]","62 (2020)[R 14]","1,104.2 (2022)[R 15]","92.4 (2019)[R 16]","245.5 (2022)[R 17][R Nb 2]","n/a","235.7 (2022)[R 17][R Nb 2][R Nb 3]","116.6 (2022)[R 17][R Nb 2]","544.4 (2022)[R 18]","2,292.7 (2020)[R 19]","154.4 (2020)[R 19]","385.8 (2020)[R 19]","22.8 (2020)[R 19]","1,800 (2021)[R 20]","839.8 (2020)[R 19]","125.2 (2020)[R 19]","35.1 (2020)[R 19]","n/a[R Nb 4]","94.8 (2020)[R 19]","2,415.6 (2020)[R 19]","37 (2020)[R 19]","582.4 (2020)[R 19]","51.3 (2020)[R 19]","195.1 (2020)[R 19]","21.3 (2020)[R 19]","1,616.3 (2021)[R 21][R 22][R Nb 5]","8.7 (2020)[R 19]","n/a","159.3 (2020)[R 19]","52.5 (2020)[R 19]","n/a","135.9 (2020)[R 19]","801.3 (2020)[R 19]","208.4 (2020)[R 19]","n/a","159.9 (2020)[R 19]","139.1 (2020)[R 19]","2,834.7 (2020)[R 19]","n/a","316.3 (2020)[R 19]","2,178 (2021)","71.7 (2020)[R 19]","308.6 (2020)[R 19]","0.88 (6 days in 2020)","n/a","338.8 (2020)[R 19]","19.1 (2020)[R 19]","7 (2020)[R 19]","1,012.7 (2021)[R 23]","87.2 (2020)[R 19]","114 (2020)[R 19]","731 (2020)[R 19]","20.9 (2020)[R 19]","341 (2020)[R 19]","215.2 (2022)[R 24]","251.4 (2020)[R 25]","107 (2022)[R 26]","49.6 (2020)[R 27]","n/a","1,314 (2015)[R 28][R Nb 6]","69.9 (2022)[R 29]","89.3 (2021)[R 30]","159 (2021)[R 30]","57.9 (2021)[R 30]","1,339 (2022)[R 31][R 32][R Nb 7]","32.7 (2021)[R 30]","84.4 (2021)[R 30]","78.4 (2020)[R 3]","492.1 (2022)[R 33]","195.8 (2022)[R 34]","254 (2021)[R 35]","71.8 (2021)[R 36]","259.2 (2018)[R 37][R Nb 8]","211.6 (2021)[R 38]","0.4 (2019*)[R 39]","174.2 (2020*)[R 40]","42 (2019*)[R 39]","1,790 (2019*)[R 39]","18.3 (2018*)[R 41][R Nb 9]","173 (2019*)[R 39]","7 (2019*)[R 39]","n/a","17 (2019*)[R 39]","256 (2019*)[R 39]","22 (2019*)[R 39]","126 (2018)[R 42]","4 (2019*)[R 39]","5 (2019*)[R 39]","n/a","n/a","19.7 (2022)[R 43]","n/a","50.7 (2018)[R 44]","18 (2018)[R 45]","n/a","n/a","820 (2018*)[R 46]","18.7 (2019)[R 47]","6.5 (2019)[R 48]","15.3 (2018)[R 49][R Nb 10]","387.2 (2019)[R 50]","41.1 (2019)[R 51][R Nb 11]","320 (2018)[R 52]","42.5 (2018)[R 53]","173.3 (2019*)[R 54][R Nb 12]","24 (2019*)[R 54][R Nb 12]","114.2 (2019*)[R 54][R Nb 12]","146.4 (2019*)[R 54][R Nb 12]","487.4 (2019*)[R 54][R Nb 12]","870.4 (2016*)[R 55][R Nb 12]","226.9 (2019*)[R 54][R Nb 12]","91.7 (2019*)[R 54][R Nb 12]","1,174.9 (2019*)[R 56][R 54][R Nb 12]","2,757.4 (2019*)[R 56][R 54][R Nb 12]","95 (2019*)[R 57][R Nb 12]","243.2 (2019*)[R 54][R Nb 12]","80.6 (2019*)[R 54][R Nb 12]","17.1 (2022)[R 3]","36 (2009)[R 58]","361 (2019)[R 59][R Nb 13]","168 (2019)[R 59]","40 (2019)[R 59]","19 (2019)[R 59]","116 (2019)[R 59]","2,127.2 (2020)[R 60][R Nb 14][R Nb 15]","426.4 (2019)[R 61][R Nb 16]","122.5 (2019)[R 61][R Nb 17]","159.3 (2022)[R 62]","114.5 (2021)[R 63]","1057.5 (2022)[R 64]","109.9 (2020)[R 65]","111.3 (2019)[R 66][R Nb 18]","99 (2019)[R 67]","n/a","74 (2020)[R 68]","20 (2020-2021)[R 69]","49.9 (2020)[R 70]","110.4 (2018)[R 71]","218.2 (2019)[R 72][R Nb 19]","96.9 (2019)[R 73]","195.4 (2019)[R 74]","184.6 (2019)[R 75]","n/a","179.2 (2019)[R 76]","30.5 (2022)[R 3]","2,061.8 (2022)[R 3]","29.9 (2022)[R 3]","77.3 (2022)[R 3]","649 (2022)[R 3]","11.2 (2022)[R 3]","38.9 (2022)[R 3]","1,001.9 (2022)[R 77][R Nb 20]","371.7 (2022)[R 78]","80.3 (2022)[R 79]","571.7 (2022)[R 80]","462 (2019)[R 81][R Nb 21]","32.8 (2019)[R 82][R Nb 22]","65.4 (2019)[R 83]","695.7 (2020)[R 84]","n/a","28 (2019)[R 85]","236.9 (2020*)[R 86]","95.3 (2020)[R 87][R Nb 23]","14 (2011)[R 88]","67.4 (2020)[R 89]","91.3 (2010)[R 90]","542 (2022)[R 91]","100 (2019)[R 92]","7.5 (2018)[R 93]","231.1 (2018)[R 94]","496.1 (2018)[R 95]","113.6 (2020)[R 96]","12.7 (2019*)[R 97]","1,026 (2022*)[R 98][R Nb 24]","77.2 (2021)[R 99]","28.2 (2022)[R 17][R Nb 2]","2 (2022)[R 17][R Nb 2]","81 (2022)[R 17][R Nb 2]","103.5 (2022)[R 17][R Nb 2]","2.8 (2022)[R 17][R Nb 2]","n/a","25.8 (2022)[R 17][R Nb 2][R Nb 25]","12 (2022)[R 17][R Nb 2]","1,793.1 (2022)[R 17][R Nb 2]","3.8 (2022)[R 17][R Nb 2]","45.5 (2022)[R 17][R Nb 2]","41.2 (2022)[R 17][R Nb 2]","4.9 (2022)[R 17][R Nb 2]","39.6 (2022)[R 17][R Nb 2]","2.5 (2022)[R 17][R Nb 2]","93 (2022)[R 17][R Nb 2]","136.7 (2022)[R 3]","358 (2017)[R 100]","7.5 (2021)[R 101]"]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>City<\/th>\n      <th>Countryregion<\/th>\n      <th>Name<\/th>\n      <th>Serviceopened<\/th>\n      <th>Lastexpanded<\/th>\n      <th>.mw.parser.output..tooltip.dotted.border.bottom.1px.dotted.cursor.help.Stations<\/th>\n      <th>Lines<\/th>\n      <th>System.length<\/th>\n      <th>Annual.ridership.millions.<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":7},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"City","targets":1},{"name":"Countryregion","targets":2},{"name":"Name","targets":3},{"name":"Serviceopened","targets":4},{"name":"Lastexpanded","targets":5},{"name":".mw.parser.output..tooltip.dotted.border.bottom.1px.dotted.cursor.help.Stations","targets":6},{"name":"Lines","targets":7},{"name":"System.length","targets":8},{"name":"Annual.ridership.millions.","targets":9}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Here are the problems I see in MetroList:</p>
<ul>
<li>The name of the column that holds the number of stations on each system has a long and irrelevent name.</li>
<li>Several of the columns have units and footnote links in them.</li>
</ul>
<p>I decided to import it to Rstudio and take a crack at cleaning it.</p>
</section>
<section id="tidying" class="level3">
<h3 class="anchored" data-anchor-id="tidying">Tidying</h3>
<p>Optimistically, I decided to call this new table TidyMetroList.</p>
<section id="renaming-columns" class="level5">
<h5 class="anchored" data-anchor-id="renaming-columns">Renaming Columns</h5>
<p>The following code renames the columns with a unified naming system:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>TidyMetroList <span class="ot">&lt;-</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  MetroList <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">"City"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Country"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Name"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ServiceOpened"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">"LastExpanded"</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">"StationCount"</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Lines"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">"SystemLength"</span>,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">"RidershipMillions"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-20dacf7638b59497e201" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-20dacf7638b59497e201">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208"],["Algiers","Buenos Aires","Yerevan","Sydney","Vienna","Baku","Dhaka","Minsk","Brussels","Belo Horizonte","Brasília","Fortaleza","Porto Alegre","Recife","Rio de Janeiro","Salvador","São Paulo","Sofia","Montreal","Montreal","Toronto","Vancouver","Santiago","Beijing","Changchun","Changsha","Changzhou","Chengdu","Chongqing","Dalian","Dongguan","Foshan","Fuzhou","Guangzhou","Guiyang","Hangzhou","Harbin","Hefei","Hohhot","Hong Kong","Jinan","Jinhua","Kunming","Lanzhou","Luoyang","Nanchang","Nanjing","Nanning","Nantong","Ningbo","Qingdao","Shanghai","Shaoxing","Shenyang","Shenzhen","Shijiazhuang","Suzhou","Taiyuan","Taizhou","Tianjin","Ürümqi","Wenzhou","Wuhan","Wuxi","Xiamen","Xi'an","Xuzhou","Zhengzhou","Medellín","Prague","Copenhagen","Santo Domingo","Quito","Cairo","Helsinki","Lille","Lyon","Marseille","Paris","Rennes","Toulouse","Tbilisi","Berlin","Hamburg","Munich","Nuremberg","Athens","Budapest","Ahmedabad","Bangalore","Chennai","Delhi","Gurgaon","Hyderabad","Jaipur","Kanpur","Kochi","Kolkata","Lucknow","Mumbai","Nagpur","Noida","Pune","Navi Mumbai","Jakarta","Isfahan","Mashhad","Shiraz","Karaj","Tabriz","Tehran","Brescia","Catania","Genoa","Milan","Naples","Rome","Turin","Fukuoka","Hiroshima","Kobe","Kyoto","Nagoya","Osaka","Sapporo","Sendai","Tokyo","Tokyo","Tokyo","Yokohama","Yokohama","Almaty","Pyongyang","Busan","Daegu","Daejeon","Gwangju","Incheon","Seoul","Seoul","Seoul","Kuala Lumpur","Guadalajara","Mexico City","Monterrey","Amsterdam","Rotterdam","Lagos","Oslo","Lahore","Panama City","Lima","Manila","Manila","Warsaw","Lisbon","Doha","Bucharest","Kazan","Moscow","Nizhny Novgorod","Novosibirsk","Saint Petersburg","Samara","Yekaterinburg","Singapore","Barcelona","Bilbao","Madrid","Stockholm","Lausanne","Kaohsiung","Taipei","Taichung","Taoyuan","Bangkok","Bangkok","Adana","Ankara","Bursa","Istanbul","İzmir","Dnipro","Kharkiv","Kyiv","Dubai","Glasgow","London","London","Atlanta","Baltimore","Boston","Chicago","Cleveland","Honolulu","Los Angeles","Miami","New York City","New York City","New York City","Philadelphia","Philadelphia","San Francisco (Bay Area)","San Juan","Washington, D.C.","Tashkent","Caracas","Hanoi"],["Algeria","Argentina","Armenia","Australia","Austria","Azerbaijan","Bangladesh","Belarus","Belgium","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Bulgaria","Canada","Canada","Canada","Canada","Chile","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","Colombia","Czech Republic","Denmark","Dominican Republic","Ecuador","Egypt","Finland","France","France","France","France","France","France","Georgia","Germany","Germany","Germany","Germany","Greece","Hungary","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","Indonesia","Iran","Iran","Iran","Iran","Iran","Iran","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Japan[Nb 44]","Kazakhstan","North Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Malaysia","Mexico","Mexico","Mexico","Netherlands","Netherlands","Nigeria","Norway","Pakistan","Panama","Peru","Philippines","Philippines","Poland","Portugal","Qatar","Romania","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Singapore","Spain","Spain","Spain","Sweden","Switzerland","Taiwan","Taiwan","Taiwan","Taiwan","Thailand","Thailand","Turkey","Turkey","Turkey","Turkey","Turkey","Ukraine","Ukraine","Ukraine","United Arab Emirates","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","Uzbekistan","Venezuela","Vietnam"],["Algiers Metro","Buenos Aires Underground","Yerevan Metro","Sydney Metro","Vienna U-Bahn","Baku Metro","Dhaka Metro Rail","Minsk Metro","Brussels Metro","Belo Horizonte Metro","Federal District Metro","Fortaleza Metro[Nb 6]","Porto Alegre Metro","Recife Metro[Nb 7]","Rio de Janeiro Metro","Salvador Metro","São Paulo Metro","Sofia Metro","Montreal Metro","Réseau express métropolitain","Toronto Subway[59]","SkyTrain","Santiago Metro","Beijing Subway[69]","Changchun Rail Transit","Changsha Metro","Changzhou Metro","Chengdu Metro","Chongqing Rail Transit","Dalian Metro[79]","Dongguan Rail Transit","Foshan Metro[Nb 16]","Fuzhou Metro","Guangzhou Metro[Nb 17]","Guiyang Metro","Hangzhou Metro[88]","Harbin Metro","Hefei Metro","Hohhot Metro","Mass Transit Railway","Jinan Metro","Jinhua Rail Transit","Kunming Metro","Lanzhou Metro","Luoyang Subway","Nanchang Metro","Nanjing Metro[108]","Nanning Metro[112]","Nantong Metro","Ningbo Rail Transit[115]","Qingdao Metro","Shanghai Metro","Shaoxing Metro","Shenyang Metro","Shenzhen Metro","Shijiazhuang Metro","Suzhou Rail Transit","Taiyuan Metro","Taizhou Rail Transit","Tianjin Metro","Ürümqi Metro","Wenzhou Rail Transit","Wuhan Metro","Wuxi Metro","Xiamen Metro","Xi'an Metro","Xuzhou Metro","Zhengzhou Metro","Medellín Metro","Prague Metro","Copenhagen Metro","Santo Domingo Metro","Quito Metro","Cairo Metro[152]","Helsinki Metro","Lille Metro","Lyon Metro","Marseille Metro","Paris Métro","Rennes Metro","Toulouse Metro","Tbilisi Metro","Berlin U-Bahn","Hamburg U-Bahn","Munich U-Bahn","Nuremberg U-Bahn","Athens Metro[Nb 31]","Budapest Metro","Ahmedabad Metro","Namma Metro","Chennai Metro","Delhi Metro","Rapid Metro Gurgaon","Hyderabad Metro","Jaipur Metro","Kanpur Metro","Kochi Metro","Kolkata Metro","Lucknow Metro","Mumbai Metro","Nagpur Metro","Noida Metro","Pune Metro","Navi Mumbai Metro","Jakarta MRT","Isfahan Urban Railway","Mashhad Urban Railway","Shiraz Metro","Karaj Metro [fa]","Tabriz Metro","Tehran Metro","Brescia Metro","Catania Metro","Genoa Metro","Milan Metro","Naples Metro[Nb 42]","Rome Metro","Turin Metro","Fukuoka City Subway","Astram Line","Kobe Municipal Subway","Kyoto Municipal Subway","Nagoya Municipal Subway","Osaka Metro","Sapporo Municipal Subway","Sendai Subway","Toei Subway","Tokyo Metro","Rinkai Line","Yokohama Municipal Subway","Minatomirai Line","Almaty Metro","Pyongyang Metro","Busan Metro","Daegu Metro","Daejeon Metro","Gwangju Metro","Incheon Subway","Seoul Metropolitan Subway[Nb 51][Nb 52]","Korail metro lines[Nb 53][Nb 52]","Shinbundang Line[Nb 52] (Neo Trans)","Rapid KL[Nb 55]","Guadalajara Electric Rail System[Nb 57]","Mexico City Metro","Metrorrey","Amsterdam Metro","Rotterdam Metro[Nb 62]","Lagos Rail Mass Transit","Oslo Metro[Nb 63]","Lahore Metro","Panama Metro","Lima Metro","Manila Light Rail Transit System","Manila Metro Rail Transit System","Warsaw Metro","Lisbon Metro","Doha Metro","Bucharest Metro","Kazan Metro[320]","Moscow Metro[323]","Nizhny Novgorod Metro","Novosibirsk Metro","Saint Petersburg Metro","Samara Metro","Yekaterinburg Metro","Mass Rapid Transit","Barcelona Metro[Nb 70]","Metro Bilbao[Nb 72]","Madrid Metro[Nb 73]","Stockholm Metro","Lausanne Métro[Nb 75]","Kaohsiung Metro","Taipei Metro","Taichung Metro[350]","Taoyuan Metro","BTS Skytrain","Metropolitan Rapid Transit","Adana Metro","Ankara Metro","Bursaray","Istanbul Metro","İzmir Metro","Dnipro Metro","Kharkiv Metro","Kyiv Metro","Dubai Metro","Glasgow Subway","London Underground[372]","Docklands Light Railway","MARTA","Baltimore Metro SubwayLink","MBTA subway[Nb 81]","Chicago \"L\"[Nb 63]","Red Line (RTA Rapid Transit)","Skyline","Metro Rail[Nb 85]","Metrorail","New York City Subway","Staten Island Railway","PATH","SEPTA[397][Nb 91]","PATCO Speedline","BART[Nb 93]","Tren Urbano","Washington Metro","Tashkent Metro","Caracas Metro[Nb 97]","Hanoi Metro"],["2011[11]","1913[Nb 1]","1981[18]","2019[20]","1978[22][Nb 3]","1967[25]","2022[27]","1984[28]","1976[30]","1986[32]","2001[35]","2012[39]","1985[42]","1985[44]","1979[46]","2014[48]","1974[51]","1998[53]","1966[55]","2023[57]","1954[60]","1985[63]","1975[65]","1971[Nb 8]","2017[Nb 11]","2014[72]","2019[74]","2010","2004","2003","2016[81]","2010","2016[83]","1997","2017[86]","2012","2013[91]","2016[93]","2019[95]","1979[Nb 20]","2019[99]","2022[103]","2012","2019[105]","2021[101][106]","2015","2005","2016","2022[114]","2014","2015[117]","1993[119]","2021[121]","2010","2004","2017","2012","2020","2022[127]","1984","2018","2019[131]","2004","2014[134]","2017[136]","2011","2019[139]","2013[141]","1995[143]","1974[144]","2002[147]","2009","2023","1987","1982[154]","1983[158]","1978[160]","1977","1900[163]","2002","1993[167]","1966[169]","1902[173]","1912[178]","1971[181]","1972","1869[186][Nb 32]","1896","2019[191]","2011[194]","2015[199]","2002[203]","2013[207]","2017[209]","2015[211][212]","2021[213]","2017[214]","1984[217]","2017[220]","2014[222]","2019[226]","2019[228]","2022","2023","2019[229]","2015[230]","2011[233]","2014[237]","2023[238][Nb 36]","2015[240]","1999[241][Nb 38]","2013[245]","1999[247]","1990[250]","1964[251]","1993","1955","2006[259]","1981[261]","1994[263]","1977[263]","1981[263]","1957[263]","1933[267]","1971[263]","1987[271]","1960[273]","1927[276]","1996[263]","1972[280]","2004[263]","2011[281]","1973","1985","1997","2006","2004","1999","1974[288]","1994[Nb 54]","2011","1996","1994[Nb 58]","1969[296]","1991[298]","1977","1968","2023","1966[Nb 64]","2020[306]","2014","2011","1984[309]","1999","1995","1959[314]","2019[315]","1979[317]","2005","1935","1985","1986","1955","1987[329]","1991","1987","1924","1995[335]","1919[339]","1950[342][Nb 74]","2008[344]","2008","1996[346]","2021[351]","2017","1999[353]","2004[356]","2009","1997","2002","1989[363]","2000[366]","1995","1975","1960","2009[368]","1896[371]","1863[1][Nb 80]","1987[374]","1979[375]","1983[377]","1901[377][Nb 82]","1892[381][Nb 83]","1955[384]","2023","1993[386]","1984[387]","1904[389][Nb 87]","1925[377][Nb 89]","1908[394]","1907[377]","1936[377][Nb 92]","1972[401]","2004[377]","1976[403]","1977","1983[407]","2021[411]"],["2018[12]","2019[16]","1996[19]","–","2017[23]","2022[26]","2023","2020[28]","2009[Nb 4]","2002[32]","2020[36]","2013[40]","2014[42]","2009[44]","2016[47]","2023[49]","2021[52]","2021[54]","2007[55]","–","2017[60]","2016[64]","2023[66]","2023[70]","2023[71]","2023[73]","2021[75]","2020[76]","2023","2023[80]","–","2022[82]","2023[84]","2022[85]","2021[87]","2022[89]","2023[92]","2023[94]","2020[96]","2022","2021[100][101]","2023","2022[104]","2023","2021","2021[107]","2023[109]","2021[113]","–","2022[116]","2023[118]","2021[120]","2023","2023[122]","2022[123]","2021[124]","2023[125]","–","–","2022[129]","2019[130]","2023","2022[133]","2021[135]","2023[137]","2023[138]","2021[140]","2023[142]","2012[Nb 25]","2015[Nb 26]","2020[147]","2018[149]","–","2022[153]","2022[Nb 27][155]","2000[158]","2023","2019","2022[164]","2022","2007[167][Nb 28]","2017[170][Nb 29]","2021[174][175]","2019[179]","2010[Nb 30]","2020[182][183]","2022[187]","2014[189]","2022[192]","2023[195]","2021[200]","2023[204]","2017[208]","2020[210]","2020[212]","–","2022[215]","2022[218]","2019[221]","2023[223]","2022[227]","–","2023","–","–","2018[231][232]","2019[234]","2023[Nb 35]","–","2020","2023[242]","–","2021[Nb 40][248]","2012[250]","2023[251]","2021[Nb 43]","2018[255]","2021[260]","2023[262]","2015[264]","2001","2008","2011[266]","2006[267]","1999","2015[272]","2002[273]","2020[277]","2002","2008[280]","2008","2022[281]","1987[Nb 46]","2017[Nb 47]","2015[Nb 48]","2007[Nb 49]","2008[Nb 50]","2020[286]","2022[289]","2022[291]","2022[293]","2023[295]","2020","2012[Nb 59]","2021[299]","2018[301]","2023","–","2016[Nb 65]","–","2023[307]","2014[308]","2021[309]","2000","2022[313]","2016[314]","2019[316]","2023[318]","2018[321]","2023","2018[325]","2010[326]","2019[327]","2015[330]","2012[331]","2022[332]","2021[333]","2020[336][337]","2019[340]","1994[342]","–","2012","2020[347]","–","2023","2021[354]","2023[357]","2010","2023[360][Nb 77]","2014[Nb 78]","2023","2014[366]","–","2016","2013","2021[369]","–","2021[1]","2011[374]","2000[375]","1995[378]","2014[379]","2017[382]","1968[384]","–","2000[386][Nb 86]","2012","2017[390]","2017[392]","1937[Nb 90]","1973","1980[400]","2020[402]","2005","2023[404]","2023[Nb 96][405]","2015[408]","–"],["19[12]","78[Nb 2][17]","10[18]","13[20]","98[24]","27[25]","16","30[29]","59[30][Nb 5]","19[33]","27[37]","20[41]","22[43]","28[45]","41[46]","20[50]","89[52]","47[54]","68[56]","5","70[61]","53[64]","122[67]","370[Nb 9]","35[Nb 12]","135","43","284[Nb 14]","241[Nb 15]","99","15","61","90","254[Nb 18]","55","254[Nb 19]","65","136","43[95]","99[97]","40[99][102]","32","103","27[105]","33[101][106]","94","201[110]","93","28","116","150","403[Nb 21]","36","111","303[Nb 23]","60[124]","181","23","15","181","21","36","254[Nb 24]","80","70","191","51","157","27[143]","58[145]","39[148]","33[149][150][151]","15","74[152]","30[156]","60[159]","42[161]","29[162]","308[165]","28","37[168]","23[171]","175[176][175]","93[180]","96[181]","49[183]","66[188]","48","31","65[196]","42[201]","231[Nb 33]","11[208]","58[210]","11[212]","9","24","40[219]","21[220]","40[224]","36[227]","21","20","11","13","20[231]","35[235]","23","10[Nb 37]","18","162[Nb 39][243][244]","17[246]","10[249]","8[250]","113[Nb 41]","27[254]","73[256]","23[259][260]","36[262]","22","28","31[265]","87[266]","100[268]","46[270]","29[271]","99[Nb 45]","142[278]","8","40[280]","6","11","17","108","88[283]","22","20","56[287]","279[290]","86","16","128[Nb 56]","28","163[Nb 60]","38[300]","39[302]","71","5[304]","101","26","32","26","33[310]","13","39","50[314]","37[316]","57[Nb 67][319]","11[322]","207[Nb 68][324]","15[325]","14[322]","72[Nb 69][328]","10[322]","9[322]","134[332]","132[Nb 71][334]","42[338][337]","242[341]","100[343]","14","37[345]","119[Nb 76]","18[351]","22[352]","60[354]","75[358]","13[359]","57[361]","39[362]","128[Nb 79]","17[366]","6[367]","30[367]","52[367]","53","15[371]","272[373]","45[374]","38[376]","14[378]","51[380]","145[383]","18[385]","9","16[386][Nb 85]","23[388]","424[Nb 88]","21[389][393]","13[395]","72[397]","13[400]","47[401][Nb 94]","16","98[403]","48[406]","49[Nb 98]","12"],[1,7,1,1,5,1,1,3,4,1,2,2,1,3,3,2,6,4,4,1,3,3,7,27,2,6,2,13,10,6,1,3,5,16,2,13,3,5,2,10,3,2,6,2,2,4,13,5,1,5,7,19,2,5,16,3,6,1,1,8,1,2,11,4,3,9,3,9,2,3,4,2,1,3,2,2,4,2,16,2,2,2,9,4,8,3,3,4,2,2,2,10,1,3,1,1,1,3,1,3,2,1,2,1,1,1,2,2,6,1,6,1,1,1,5,4,3,1,3,1,3,2,6,8,3,2,4,9,1,2,1,1,2,6,3,1,1,2,7,3,1,5,1,12,3,5,5,1,5,1,2,1,2,1,2,4,3,5,1,19,2,2,5,1,1,6,12,3,13,7,2,3,5,1,1,3,8,1,3,2,11,1,1,3,3,2,1,11,7,4,2,3,8,1,1,2,2,28,1,4,2,1,5,1,6,4,4,1],["18.5 km (11.5 mi)[13]","56.7 km (35.2 mi)[17]","12.1 km (7.5 mi)[18]","36 km (22 mi)[20][21]","83.3 km (51.8 mi)[22]","40.7 km (25.3 mi)[25]","20.1 km (12.5 mi)","40.8 km (25.4 mi)[29]","39.9 km (24.8 mi)[31]","28.1 km (17.5 mi)[34]","42.4 km (26.3 mi)[37][38]","24.1 km (15.0 mi)[41]","43.8 km (27.2 mi)[43]","39.5 km (24.5 mi)[45]","58 km (36 mi)[47]","34 km (21 mi)","104.4 km (64.9 mi)[52]","52 km (32 mi)[54]","69.2 km (43.0 mi)[56]","16.6 km (10.3 mi)[58]","70.5 km (43.8 mi)[62]","79.6 km (49.5 mi)[64]","143 km (89 mi)[68]","785.7 km (488.2 mi)[70][Nb 10]","43 km (27 mi)[Nb 13]","207.9 km (129.2 mi)","54 km (33.55 mi)","517.8 km (321.7 mi)[77]","485 km (301 mi)[78]","237.7 km (147.7 mi)","37.7 km (23.4 mi)","112.7 km (70.0 mi)","143.5 km (89.2 mi)","617.1 km (383.4 mi)[85]","75.7 km (47.0 mi)[87]","516.2 km (320.8 mi)[90]","82.8 km (51.4 mi)","176.2 km (109.5 mi)","49 km (30 mi)[95]","174.7 km (108.6 mi)[98]","84.3 km (52.4 mi)[99][102]","118.5 km (73.6 mi)","164.3 km (102.1 mi)","35 km (22 mi)[105]","43.6 km (27.1 mi)[101]","128.3 km (79.7 mi)","498.7 km (309.9 mi)[111]","128.2 km (79.7 mi)","39.2 km (24.4 mi)","185.3 km (115.1 mi)","311.5 km (193.6 mi)","795.5 km (494.3 mi)[120][Nb 22]","57.8 km (35.9 mi)[121]","163.7 km (101.7 mi)","547.4 km (340.1 mi)","76.5 km (47.5 mi)[124]","249.5 km (155.0 mi)[125]","23.7 km (14.7 mi)[126]","52.4 km (32.6 mi)[128]","288.7 km (179.4 mi)","27.6 km (17.1 mi)","116.5 km (72.4 mi)[132]","460.9 km (286.4 mi)[133]","114.8 km (71.3 mi)","98.4 km (61.1 mi)","311 km (193 mi)","64.4 km (40.0 mi)","260.6 km (161.9 mi)","31.3 km (19.4 mi)[143]","65.4 km (40.6 mi)[146]","38.2 km (23.7 mi)[148]","31 km (19 mi)[150][151]","22.6 km (14.0 mi)","93.4 km (58.0 mi)[152]","43 km (27 mi)[157]","45 km (28 mi)[159]","34.4 km (21.4 mi)[161]","22.7 km (14.1 mi)[162]","226.9 km (141.0 mi)[166]","22.4 km (13.9 mi)","28.2 km (17.5 mi)[167]","27.3 km (17.0 mi)[172]","155.6 km (96.7 mi)[177]","106 km (66 mi)[180]","95 km (59 mi)[181]","38.4 km (23.9 mi)[183]","91.7 km (57.0 mi)[184]","39.2 km (24.4 mi)[189][190]","37.9 km (23.5 mi)[193]","73.81 km (45.86 mi)[197][198]","54.1 km (33.6 mi)[202]","351.3 km (218.3 mi)[Nb 34][205]","12.1 km (7.5 mi)[208]","67 km (42 mi)[210]","12 km (7.5 mi)[212]","8.73 km (5.42 mi)","26.8 km (16.7 mi)[216]","47.9 km (29.8 mi)[219]","22.9 km (14.2 mi)[220]","46.5 km (28.9 mi)[225]","38.2 km (23.7 mi)[227]","29.7 km (18.5 mi)","23.8 km (14.8 mi)","11.10 km (6.90 mi)","15.7 km (9.8 mi)","20.2 km (12.6 mi)[231]","37.5 km (23.3 mi)[236]","32.5 km (20.2 mi)","27.2 km (16.9 mi)[239][Nb 37]","17.2 km (10.7 mi)","274.1 km (170.3 mi)[Nb 39][243]","13.7 km (8.5 mi)[246]","8.8 km (5.5 mi)","7.1 km (4.4 mi)[250]","104.1 km (64.7 mi)[253]","30.8 km (19.1 mi)[254]","60 km (37 mi)[257][258]","15.1 km (9.4 mi)[260]","31.4 km (19.5 mi)[262]","18.4 km (11.4 mi)[263]","38.1 km (23.7 mi)[263]","31.2 km (19.4 mi)[263]","93.3 km (58.0 mi)[266]","129.9 km (80.7 mi)[267][269]","48 km (30 mi)[263]","28.7 km (17.8 mi)[271]","109 km (68 mi)[273]","195.1 km (121.2 mi)[279]","12.2 km (7.6 mi)[263]","53.4 km (33.2 mi)[280]","4.1 km (2.5 mi)[263]","13.4 km (8.3 mi)[281]","22.5 km (14.0 mi)","140.1 km (87.1 mi)[282]","82.9 km (51.5 mi)[283]","22.6 km (14.0 mi)[284]","20.1 km (12.5 mi)[285]","59.7 km (37.1 mi)[287]","345.3 km (214.6 mi)[290]","151.7 km (94.3 mi)[292]","33.4 km (20.8 mi)[294]","196.2 km (121.9 mi)","30 km (19 mi)","200.9 km (124.8 mi)[297][Nb 61]","40.2 km (25.0 mi)[300]","41.2 km (25.6 mi)","102.3 km (63.6 mi)[303]","13 km (8.1 mi)","85 km (53 mi)[305]","27.1 km (16.8 mi)[306]","37.8 km (23.5 mi)","34.4 km (21.4 mi)[308]","37.2 km (23.1 mi)[309][311]","16.9 km (10.5 mi)[312]","41.2 km (25.6 mi)","44.2 km (27.5 mi)[314]","76 km (47 mi)[Nb 66]","80.1 km (49.8 mi)[318]","16.8 km (10.4 mi)[322]","460.5 km (286.1 mi)[324]","21.4 km (13.3 mi)","15.9 km (9.9 mi)[322]","124.8 km (77.5 mi)[328]","11.6 km (7.2 mi)[322]","12.7 km (7.9 mi)[322]","230 km (140 mi)","128.3 km (79.7 mi)[334]","45.1 km (28.0 mi)[338]","293.9 km (182.6 mi)[341]","108 km (67 mi)[343]","5.9 km (3.7 mi)","42.7 km (26.5 mi)[345]","152.9 km (95.0 mi)[348]","16.7 km (10.4 mi)[351]","53.1 km (33.0 mi)","70.1 km (43.6 mi) [355]","101.4 km (63.0 mi)[358]","13.5 km (8.4 mi)[359]","67.4 km (41.9 mi)[360][361]","39 km (24 mi)[362]","199.26 km (123.81 mi)[364]","19.8 km (12.3 mi)[366]","7.8 km (4.8 mi)[367]","38.7 km (24.0 mi)[367]","67.7 km (42.1 mi)[367]","89.3 km (55.5 mi)[370]","10.4 km (6.5 mi)[371]","402 km (250 mi)[373]","34 km (21 mi)","76.6 km (47.6 mi)[376]","24.9 km (15.5 mi)[378]","63.9 km (39.7 mi)[380]","165.4 km (102.8 mi)[383][Nb 84]","31 km (19 mi)[385]","17.4 km (10.8 mi)","28 km (17 mi)[386]","39.3 km (24.4 mi)[388]","399 km (248 mi)[391]","22.5 km (14.0 mi)[391]","22.2 km (13.8 mi)[396]","59.1 km (36.7 mi)[398][399]","22.9 km (14.2 mi)[400]","192 km (119 mi)[401][Nb 95]","17.2 km (10.7 mi)","208 km (129 mi)","66.5 km (41.3 mi)[406]","67.2 km (41.8 mi)[Nb 98]","13.1 km (8.1 mi)"],["45.3 (2019)[R 1]","74 (2020)[R 2]","23.3 (2022)[R 3]","19.7 (2022)[R 4][R 5][R Nb 1]","459.8 (2019)[R 6]","202.5 (2022)[R 3]","n/a","225.9 (2022)[R 3]","129.2 (2022)[R 7]","54.4 (2019)[R 8]","39.1 (2022)[R 9]","8.9 (2022)[R 10]","31.9 (2022)[R 11]","93.5 (2019)[R 12]","118.7 (2020)[R 13]","62 (2020)[R 14]","1,104.2 (2022)[R 15]","92.4 (2019)[R 16]","245.5 (2022)[R 17][R Nb 2]","n/a","235.7 (2022)[R 17][R Nb 2][R Nb 3]","116.6 (2022)[R 17][R Nb 2]","544.4 (2022)[R 18]","2,292.7 (2020)[R 19]","154.4 (2020)[R 19]","385.8 (2020)[R 19]","22.8 (2020)[R 19]","1,800 (2021)[R 20]","839.8 (2020)[R 19]","125.2 (2020)[R 19]","35.1 (2020)[R 19]","n/a[R Nb 4]","94.8 (2020)[R 19]","2,415.6 (2020)[R 19]","37 (2020)[R 19]","582.4 (2020)[R 19]","51.3 (2020)[R 19]","195.1 (2020)[R 19]","21.3 (2020)[R 19]","1,616.3 (2021)[R 21][R 22][R Nb 5]","8.7 (2020)[R 19]","n/a","159.3 (2020)[R 19]","52.5 (2020)[R 19]","n/a","135.9 (2020)[R 19]","801.3 (2020)[R 19]","208.4 (2020)[R 19]","n/a","159.9 (2020)[R 19]","139.1 (2020)[R 19]","2,834.7 (2020)[R 19]","n/a","316.3 (2020)[R 19]","2,178 (2021)","71.7 (2020)[R 19]","308.6 (2020)[R 19]","0.88 (6 days in 2020)","n/a","338.8 (2020)[R 19]","19.1 (2020)[R 19]","7 (2020)[R 19]","1,012.7 (2021)[R 23]","87.2 (2020)[R 19]","114 (2020)[R 19]","731 (2020)[R 19]","20.9 (2020)[R 19]","341 (2020)[R 19]","215.2 (2022)[R 24]","251.4 (2020)[R 25]","107 (2022)[R 26]","49.6 (2020)[R 27]","n/a","1,314 (2015)[R 28][R Nb 6]","69.9 (2022)[R 29]","89.3 (2021)[R 30]","159 (2021)[R 30]","57.9 (2021)[R 30]","1,339 (2022)[R 31][R 32][R Nb 7]","32.7 (2021)[R 30]","84.4 (2021)[R 30]","78.4 (2020)[R 3]","492.1 (2022)[R 33]","195.8 (2022)[R 34]","254 (2021)[R 35]","71.8 (2021)[R 36]","259.2 (2018)[R 37][R Nb 8]","211.6 (2021)[R 38]","0.4 (2019*)[R 39]","174.2 (2020*)[R 40]","42 (2019*)[R 39]","1,790 (2019*)[R 39]","18.3 (2018*)[R 41][R Nb 9]","173 (2019*)[R 39]","7 (2019*)[R 39]","n/a","17 (2019*)[R 39]","256 (2019*)[R 39]","22 (2019*)[R 39]","126 (2018)[R 42]","4 (2019*)[R 39]","5 (2019*)[R 39]","n/a","n/a","19.7 (2022)[R 43]","n/a","50.7 (2018)[R 44]","18 (2018)[R 45]","n/a","n/a","820 (2018*)[R 46]","18.7 (2019)[R 47]","6.5 (2019)[R 48]","15.3 (2018)[R 49][R Nb 10]","387.2 (2019)[R 50]","41.1 (2019)[R 51][R Nb 11]","320 (2018)[R 52]","42.5 (2018)[R 53]","173.3 (2019*)[R 54][R Nb 12]","24 (2019*)[R 54][R Nb 12]","114.2 (2019*)[R 54][R Nb 12]","146.4 (2019*)[R 54][R Nb 12]","487.4 (2019*)[R 54][R Nb 12]","870.4 (2016*)[R 55][R Nb 12]","226.9 (2019*)[R 54][R Nb 12]","91.7 (2019*)[R 54][R Nb 12]","1,174.9 (2019*)[R 56][R 54][R Nb 12]","2,757.4 (2019*)[R 56][R 54][R Nb 12]","95 (2019*)[R 57][R Nb 12]","243.2 (2019*)[R 54][R Nb 12]","80.6 (2019*)[R 54][R Nb 12]","17.1 (2022)[R 3]","36 (2009)[R 58]","361 (2019)[R 59][R Nb 13]","168 (2019)[R 59]","40 (2019)[R 59]","19 (2019)[R 59]","116 (2019)[R 59]","2,127.2 (2020)[R 60][R Nb 14][R Nb 15]","426.4 (2019)[R 61][R Nb 16]","122.5 (2019)[R 61][R Nb 17]","159.3 (2022)[R 62]","114.5 (2021)[R 63]","1057.5 (2022)[R 64]","109.9 (2020)[R 65]","111.3 (2019)[R 66][R Nb 18]","99 (2019)[R 67]","n/a","74 (2020)[R 68]","20 (2020-2021)[R 69]","49.9 (2020)[R 70]","110.4 (2018)[R 71]","218.2 (2019)[R 72][R Nb 19]","96.9 (2019)[R 73]","195.4 (2019)[R 74]","184.6 (2019)[R 75]","n/a","179.2 (2019)[R 76]","30.5 (2022)[R 3]","2,061.8 (2022)[R 3]","29.9 (2022)[R 3]","77.3 (2022)[R 3]","649 (2022)[R 3]","11.2 (2022)[R 3]","38.9 (2022)[R 3]","1,001.9 (2022)[R 77][R Nb 20]","371.7 (2022)[R 78]","80.3 (2022)[R 79]","571.7 (2022)[R 80]","462 (2019)[R 81][R Nb 21]","32.8 (2019)[R 82][R Nb 22]","65.4 (2019)[R 83]","695.7 (2020)[R 84]","n/a","28 (2019)[R 85]","236.9 (2020*)[R 86]","95.3 (2020)[R 87][R Nb 23]","14 (2011)[R 88]","67.4 (2020)[R 89]","91.3 (2010)[R 90]","542 (2022)[R 91]","100 (2019)[R 92]","7.5 (2018)[R 93]","231.1 (2018)[R 94]","496.1 (2018)[R 95]","113.6 (2020)[R 96]","12.7 (2019*)[R 97]","1,026 (2022*)[R 98][R Nb 24]","77.2 (2021)[R 99]","28.2 (2022)[R 17][R Nb 2]","2 (2022)[R 17][R Nb 2]","81 (2022)[R 17][R Nb 2]","103.5 (2022)[R 17][R Nb 2]","2.8 (2022)[R 17][R Nb 2]","n/a","25.8 (2022)[R 17][R Nb 2][R Nb 25]","12 (2022)[R 17][R Nb 2]","1,793.1 (2022)[R 17][R Nb 2]","3.8 (2022)[R 17][R Nb 2]","45.5 (2022)[R 17][R Nb 2]","41.2 (2022)[R 17][R Nb 2]","4.9 (2022)[R 17][R Nb 2]","39.6 (2022)[R 17][R Nb 2]","2.5 (2022)[R 17][R Nb 2]","93 (2022)[R 17][R Nb 2]","136.7 (2022)[R 3]","358 (2017)[R 100]","7.5 (2021)[R 101]"]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>City<\/th>\n      <th>Country<\/th>\n      <th>Name<\/th>\n      <th>ServiceOpened<\/th>\n      <th>LastExpanded<\/th>\n      <th>StationCount<\/th>\n      <th>Lines<\/th>\n      <th>SystemLength<\/th>\n      <th>RidershipMillions<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":7},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"City","targets":1},{"name":"Country","targets":2},{"name":"Name","targets":3},{"name":"ServiceOpened","targets":4},{"name":"LastExpanded","targets":5},{"name":"StationCount","targets":6},{"name":"Lines","targets":7},{"name":"SystemLength","targets":8},{"name":"RidershipMillions","targets":9}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Much better! There’s still more to go though. Next we can tackle the extra gunk in the columns.</p>
</section>
<section id="isolating-the-data" class="level5">
<h5 class="anchored" data-anchor-id="isolating-the-data">Isolating the Data</h5>
<p>We’ll do this part with regular expressions and the <code>stringr</code> package. These are the main regular expressions we’ll use:</p>
<blockquote class="blockquote">
<ul>
<li><code>[]</code>: Grouping
<ul>
<li>This element matches one of any character inside the brackets.</li>
</ul></li>
<li><code>|</code>: Alternation
<ul>
<li>This element sperates two expressions. The computer will match one or the other.</li>
</ul></li>
<li><code>w</code>: Word
<ul>
<li>This matches “word characters.” It is very inclusive with what it defines as a word character so it needs to be used with care.</li>
</ul></li>
<li><code>s</code>: Whitespace
<ul>
<li>This matches all forms of whitespace.</li>
</ul></li>
<li><code>d</code>: Digit
<ul>
<li>This matches any natural number in the closed interval [0,9].</li>
</ul></li>
<li><code>.</code>: Dot
<ul>
<li>This matches everything except linebreaks.</li>
</ul></li>
<li><code>+</code>: Plus
<ul>
<li>This matches one or more of the expression it follows.</li>
</ul></li>
<li><code>?</code>: Optional
<ul>
<li>This matches 0 or 1 of the expression it follows.</li>
</ul></li>
<li><code>{}</code>: Quantifier
<ul>
<li>This matches the quantity in the curly-brackets.</li>
</ul></li>
<li><code>(?&lt;=ExpressionHere)</code>: Positive Lookbehind
<ul>
<li>This matches an expression before the main expression without including it in the result.</li>
</ul></li>
<li><code>(?=ExpressionHere)</code>: Positive Lookahead
<ul>
<li>This matches an expression after the main expression without including it in the result.</li>
</ul></li>
</ul>
<p>– <cite>Adapted from the reference book on <a href="https://regexr.com">regexr.com</a></cite></p>
</blockquote>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you want some practice with regular expressions, checkout <a href="https://regexr.com">regexr.com</a>. They have a development environment that tests expressions in real-time and a reference book containing descriptions for every command.</p>
</div>
</div>
<p>This code uses regular expresssions to remove all of the gunk in the columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>TidyMetroList <span class="ot">&lt;-</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  TidyMetroList <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ServiceOpened =</span> <span class="fu">as.numeric</span>(<span class="fu">str_replace_all</span>(ServiceOpened, <span class="st">"</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">s+]+</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">LastExpanded =</span> <span class="fu">as.numeric</span>(<span class="fu">str_replace_all</span>(LastExpanded, <span class="st">"</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">s+]+</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Country =</span> <span class="fu">str_replace_all</span>(Country, <span class="st">"</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">s+]+</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Name =</span> <span class="fu">str_replace_all</span>(Name, <span class="st">"</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">s]+</span><span class="sc">\\</span><span class="st">]|</span><span class="sc">\\</span><span class="st">([</span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">s]+</span><span class="sc">\\</span><span class="st">)"</span>, <span class="st">""</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">StationCount =</span> <span class="fu">as.numeric</span>(<span class="fu">str_replace_all</span>(StationCount, <span class="st">"</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">s+]+</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">SystemLength =</span> <span class="fu">str_replace_all</span>(SystemLength, <span class="st">"</span><span class="sc">\\</span><span class="st">skm</span><span class="sc">\\</span><span class="st">s|</span><span class="sc">\\</span><span class="st">d+(</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+)?.mi|</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">s+]+</span><span class="sc">\\</span><span class="st">]|[</span><span class="sc">\\</span><span class="st">(</span><span class="sc">\\</span><span class="st">)]+"</span>, <span class="st">""</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-5415aa0fa354d91abc77" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5415aa0fa354d91abc77">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208"],["Algiers","Buenos Aires","Yerevan","Sydney","Vienna","Baku","Dhaka","Minsk","Brussels","Belo Horizonte","Brasília","Fortaleza","Porto Alegre","Recife","Rio de Janeiro","Salvador","São Paulo","Sofia","Montreal","Montreal","Toronto","Vancouver","Santiago","Beijing","Changchun","Changsha","Changzhou","Chengdu","Chongqing","Dalian","Dongguan","Foshan","Fuzhou","Guangzhou","Guiyang","Hangzhou","Harbin","Hefei","Hohhot","Hong Kong","Jinan","Jinhua","Kunming","Lanzhou","Luoyang","Nanchang","Nanjing","Nanning","Nantong","Ningbo","Qingdao","Shanghai","Shaoxing","Shenyang","Shenzhen","Shijiazhuang","Suzhou","Taiyuan","Taizhou","Tianjin","Ürümqi","Wenzhou","Wuhan","Wuxi","Xiamen","Xi'an","Xuzhou","Zhengzhou","Medellín","Prague","Copenhagen","Santo Domingo","Quito","Cairo","Helsinki","Lille","Lyon","Marseille","Paris","Rennes","Toulouse","Tbilisi","Berlin","Hamburg","Munich","Nuremberg","Athens","Budapest","Ahmedabad","Bangalore","Chennai","Delhi","Gurgaon","Hyderabad","Jaipur","Kanpur","Kochi","Kolkata","Lucknow","Mumbai","Nagpur","Noida","Pune","Navi Mumbai","Jakarta","Isfahan","Mashhad","Shiraz","Karaj","Tabriz","Tehran","Brescia","Catania","Genoa","Milan","Naples","Rome","Turin","Fukuoka","Hiroshima","Kobe","Kyoto","Nagoya","Osaka","Sapporo","Sendai","Tokyo","Tokyo","Tokyo","Yokohama","Yokohama","Almaty","Pyongyang","Busan","Daegu","Daejeon","Gwangju","Incheon","Seoul","Seoul","Seoul","Kuala Lumpur","Guadalajara","Mexico City","Monterrey","Amsterdam","Rotterdam","Lagos","Oslo","Lahore","Panama City","Lima","Manila","Manila","Warsaw","Lisbon","Doha","Bucharest","Kazan","Moscow","Nizhny Novgorod","Novosibirsk","Saint Petersburg","Samara","Yekaterinburg","Singapore","Barcelona","Bilbao","Madrid","Stockholm","Lausanne","Kaohsiung","Taipei","Taichung","Taoyuan","Bangkok","Bangkok","Adana","Ankara","Bursa","Istanbul","İzmir","Dnipro","Kharkiv","Kyiv","Dubai","Glasgow","London","London","Atlanta","Baltimore","Boston","Chicago","Cleveland","Honolulu","Los Angeles","Miami","New York City","New York City","New York City","Philadelphia","Philadelphia","San Francisco (Bay Area)","San Juan","Washington, D.C.","Tashkent","Caracas","Hanoi"],["Algeria","Argentina","Armenia","Australia","Austria","Azerbaijan","Bangladesh","Belarus","Belgium","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Bulgaria","Canada","Canada","Canada","Canada","Chile","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","Colombia","Czech Republic","Denmark","Dominican Republic","Ecuador","Egypt","Finland","France","France","France","France","France","France","Georgia","Germany","Germany","Germany","Germany","Greece","Hungary","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","Indonesia","Iran","Iran","Iran","Iran","Iran","Iran","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Kazakhstan","North Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Malaysia","Mexico","Mexico","Mexico","Netherlands","Netherlands","Nigeria","Norway","Pakistan","Panama","Peru","Philippines","Philippines","Poland","Portugal","Qatar","Romania","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Singapore","Spain","Spain","Spain","Sweden","Switzerland","Taiwan","Taiwan","Taiwan","Taiwan","Thailand","Thailand","Turkey","Turkey","Turkey","Turkey","Turkey","Ukraine","Ukraine","Ukraine","United Arab Emirates","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","Uzbekistan","Venezuela","Vietnam"],["Algiers Metro","Buenos Aires Underground","Yerevan Metro","Sydney Metro","Vienna U-Bahn","Baku Metro","Dhaka Metro Rail","Minsk Metro","Brussels Metro","Belo Horizonte Metro","Federal District Metro","Fortaleza Metro","Porto Alegre Metro","Recife Metro","Rio de Janeiro Metro","Salvador Metro","São Paulo Metro","Sofia Metro","Montreal Metro","Réseau express métropolitain","Toronto Subway","SkyTrain","Santiago Metro","Beijing Subway","Changchun Rail Transit","Changsha Metro","Changzhou Metro","Chengdu Metro","Chongqing Rail Transit","Dalian Metro","Dongguan Rail Transit","Foshan Metro","Fuzhou Metro","Guangzhou Metro","Guiyang Metro","Hangzhou Metro","Harbin Metro","Hefei Metro","Hohhot Metro","Mass Transit Railway","Jinan Metro","Jinhua Rail Transit","Kunming Metro","Lanzhou Metro","Luoyang Subway","Nanchang Metro","Nanjing Metro","Nanning Metro","Nantong Metro","Ningbo Rail Transit","Qingdao Metro","Shanghai Metro","Shaoxing Metro","Shenyang Metro","Shenzhen Metro","Shijiazhuang Metro","Suzhou Rail Transit","Taiyuan Metro","Taizhou Rail Transit","Tianjin Metro","Ürümqi Metro","Wenzhou Rail Transit","Wuhan Metro","Wuxi Metro","Xiamen Metro","Xi'an Metro","Xuzhou Metro","Zhengzhou Metro","Medellín Metro","Prague Metro","Copenhagen Metro","Santo Domingo Metro","Quito Metro","Cairo Metro","Helsinki Metro","Lille Metro","Lyon Metro","Marseille Metro","Paris Métro","Rennes Metro","Toulouse Metro","Tbilisi Metro","Berlin U-Bahn","Hamburg U-Bahn","Munich U-Bahn","Nuremberg U-Bahn","Athens Metro","Budapest Metro","Ahmedabad Metro","Namma Metro","Chennai Metro","Delhi Metro","Rapid Metro Gurgaon","Hyderabad Metro","Jaipur Metro","Kanpur Metro","Kochi Metro","Kolkata Metro","Lucknow Metro","Mumbai Metro","Nagpur Metro","Noida Metro","Pune Metro","Navi Mumbai Metro","Jakarta MRT","Isfahan Urban Railway","Mashhad Urban Railway","Shiraz Metro","Karaj Metro ","Tabriz Metro","Tehran Metro","Brescia Metro","Catania Metro","Genoa Metro","Milan Metro","Naples Metro","Rome Metro","Turin Metro","Fukuoka City Subway","Astram Line","Kobe Municipal Subway","Kyoto Municipal Subway","Nagoya Municipal Subway","Osaka Metro","Sapporo Municipal Subway","Sendai Subway","Toei Subway","Tokyo Metro","Rinkai Line","Yokohama Municipal Subway","Minatomirai Line","Almaty Metro","Pyongyang Metro","Busan Metro","Daegu Metro","Daejeon Metro","Gwangju Metro","Incheon Subway","Seoul Metropolitan Subway","Korail metro lines","Shinbundang Line ","Rapid KL","Guadalajara Electric Rail System","Mexico City Metro","Metrorrey","Amsterdam Metro","Rotterdam Metro","Lagos Rail Mass Transit","Oslo Metro","Lahore Metro","Panama Metro","Lima Metro","Manila Light Rail Transit System","Manila Metro Rail Transit System","Warsaw Metro","Lisbon Metro","Doha Metro","Bucharest Metro","Kazan Metro","Moscow Metro","Nizhny Novgorod Metro","Novosibirsk Metro","Saint Petersburg Metro","Samara Metro","Yekaterinburg Metro","Mass Rapid Transit","Barcelona Metro","Metro Bilbao","Madrid Metro","Stockholm Metro","Lausanne Métro","Kaohsiung Metro","Taipei Metro","Taichung Metro","Taoyuan Metro","BTS Skytrain","Metropolitan Rapid Transit","Adana Metro","Ankara Metro","Bursaray","Istanbul Metro","İzmir Metro","Dnipro Metro","Kharkiv Metro","Kyiv Metro","Dubai Metro","Glasgow Subway","London Underground","Docklands Light Railway","MARTA","Baltimore Metro SubwayLink","MBTA subway","Chicago \"L\"","Red Line ","Skyline","Metro Rail","Metrorail","New York City Subway","Staten Island Railway","PATH","SEPTA","PATCO Speedline","BART","Tren Urbano","Washington Metro","Tashkent Metro","Caracas Metro","Hanoi Metro"],[2011,1913,1981,2019,1978,1967,2022,1984,1976,1986,2001,2012,1985,1985,1979,2014,1974,1998,1966,2023,1954,1985,1975,1971,2017,2014,2019,2010,2004,2003,2016,2010,2016,1997,2017,2012,2013,2016,2019,1979,2019,2022,2012,2019,2021,2015,2005,2016,2022,2014,2015,1993,2021,2010,2004,2017,2012,2020,2022,1984,2018,2019,2004,2014,2017,2011,2019,2013,1995,1974,2002,2009,2023,1987,1982,1983,1978,1977,1900,2002,1993,1966,1902,1912,1971,1972,1869,1896,2019,2011,2015,2002,2013,2017,2015,2021,2017,1984,2017,2014,2019,2019,2022,2023,2019,2015,2011,2014,2023,2015,1999,2013,1999,1990,1964,1993,1955,2006,1981,1994,1977,1981,1957,1933,1971,1987,1960,1927,1996,1972,2004,2011,1973,1985,1997,2006,2004,1999,1974,1994,2011,1996,1994,1969,1991,1977,1968,2023,1966,2020,2014,2011,1984,1999,1995,1959,2019,1979,2005,1935,1985,1986,1955,1987,1991,1987,1924,1995,1919,1950,2008,2008,1996,2021,2017,1999,2004,2009,1997,2002,1989,2000,1995,1975,1960,2009,1896,1863,1987,1979,1983,1901,1892,1955,2023,1993,1984,1904,1925,1908,1907,1936,1972,2004,1976,1977,1983,2021],[2018,2019,1996,null,2017,2022,2023,2020,2009,2002,2020,2013,2014,2009,2016,2023,2021,2021,2007,null,2017,2016,2023,2023,2023,2023,2021,2020,2023,2023,null,2022,2023,2022,2021,2022,2023,2023,2020,2022,2021,2023,2022,2023,2021,2021,2023,2021,null,2022,2023,2021,2023,2023,2022,2021,2023,null,null,2022,2019,2023,2022,2021,2023,2023,2021,2023,2012,2015,2020,2018,null,2022,2022,2000,2023,2019,2022,2022,2007,2017,2021,2019,2010,2020,2022,2014,2022,2023,2021,2023,2017,2020,2020,null,2022,2022,2019,2023,2022,null,2023,null,null,2018,2019,2023,null,2020,2023,null,2021,2012,2023,2021,2018,2021,2023,2015,2001,2008,2011,2006,1999,2015,2002,2020,2002,2008,2008,2022,1987,2017,2015,2007,2008,2020,2022,2022,2022,2023,2020,2012,2021,2018,2023,null,2016,null,2023,2014,2021,2000,2022,2016,2019,2023,2018,2023,2018,2010,2019,2015,2012,2022,2021,2020,2019,1994,null,2012,2020,null,2023,2021,2023,2010,2023,2014,2023,2014,null,2016,2013,2021,null,2021,2011,2000,1995,2014,2017,1968,null,2000,2012,2017,2017,1937,1973,1980,2020,2005,2023,2023,2015,null],[19,78,10,13,98,27,16,30,59,19,27,20,22,28,41,20,89,47,68,5,70,53,122,370,35,135,43,284,241,99,15,61,90,254,55,254,65,136,43,99,40,32,103,27,33,94,201,93,28,116,150,403,36,111,303,60,181,23,15,181,21,36,254,80,70,191,51,157,27,58,39,33,15,74,30,60,42,29,308,28,37,23,175,93,96,49,66,48,31,65,42,231,11,58,11,9,24,40,21,40,36,21,20,11,13,20,35,23,10,18,162,17,10,8,113,27,73,23,36,22,28,31,87,100,46,29,99,142,8,40,6,11,17,108,88,22,20,56,279,86,16,128,28,163,38,39,71,5,101,26,32,26,33,13,39,50,37,57,11,207,15,14,72,10,9,134,132,42,242,100,14,37,119,18,22,60,75,13,57,39,128,17,6,30,52,53,15,272,45,38,14,51,145,18,9,16,23,424,21,13,72,13,47,16,98,48,49,12],[1,7,1,1,5,1,1,3,4,1,2,2,1,3,3,2,6,4,4,1,3,3,7,27,2,6,2,13,10,6,1,3,5,16,2,13,3,5,2,10,3,2,6,2,2,4,13,5,1,5,7,19,2,5,16,3,6,1,1,8,1,2,11,4,3,9,3,9,2,3,4,2,1,3,2,2,4,2,16,2,2,2,9,4,8,3,3,4,2,2,2,10,1,3,1,1,1,3,1,3,2,1,2,1,1,1,2,2,6,1,6,1,1,1,5,4,3,1,3,1,3,2,6,8,3,2,4,9,1,2,1,1,2,6,3,1,1,2,7,3,1,5,1,12,3,5,5,1,5,1,2,1,2,1,2,4,3,5,1,19,2,2,5,1,1,6,12,3,13,7,2,3,5,1,1,3,8,1,3,2,11,1,1,3,3,2,1,11,7,4,2,3,8,1,1,2,2,28,1,4,2,1,5,1,6,4,4,1],["18.5","56.7","12.1","36","83.3","40.7","20.1","40.8","39.9","28.1","42.4","24.1","43.8","39.5","58","34","104.4","52","69.2","16.6","70.5","79.6","143","785.7","43","207.9","54","517.8","485","237.7","37.7","112.7","143.5","617.1","75.7","516.2","82.8","176.2","49","174.7","84.3","118.5","164.3","35","43.6","128.3","498.7","128.2","39.2","185.3","311.5","795.5","57.8","163.7","547.4","76.5","249.5","23.7","52.4","288.7","27.6","116.5","460.9","114.8","98.4","311","64.4","260.6","31.3","65.4","38.2","31","22.6","93.4","43","45","34.4","22.7","226.9","22.4","28.2","27.3","155.6","106","95","38.4","91.7","39.2","37.9","73.81","54.1","351.3","12.1","67","12","8.73","26.8","47.9","22.9","46.5","38.2","29.7","23.8","11.10","15.7","20.2","37.5","32.5","27.2","17.2","274.1","13.7","8.8","7.1","104.1","30.8","60","15.1","31.4","18.4","38.1","31.2","93.3","129.9","48","28.7","109","195.1","12.2","53.4","4.1","13.4","22.5","140.1","82.9","22.6","20.1","59.7","345.3","151.7","33.4","196.2","30","200.9","40.2","41.2","102.3","13","85","27.1","37.8","34.4","37.2","16.9","41.2","44.2","76","80.1","16.8","460.5","21.4","15.9","124.8","11.6","12.7","230","128.3","45.1","293.9","108","5.9","42.7","152.9","16.7","53.1","70.1 ","101.4","13.5","67.4","39","199.26","19.8","7.8","38.7","67.7","89.3","10.4","402","34","76.6","24.9","63.9","165.4","31","17.4","28","39.3","399","22.5","22.2","59.1","22.9","192","17.2","208","66.5","67.2","13.1"],["45.3 (2019)[R 1]","74 (2020)[R 2]","23.3 (2022)[R 3]","19.7 (2022)[R 4][R 5][R Nb 1]","459.8 (2019)[R 6]","202.5 (2022)[R 3]","n/a","225.9 (2022)[R 3]","129.2 (2022)[R 7]","54.4 (2019)[R 8]","39.1 (2022)[R 9]","8.9 (2022)[R 10]","31.9 (2022)[R 11]","93.5 (2019)[R 12]","118.7 (2020)[R 13]","62 (2020)[R 14]","1,104.2 (2022)[R 15]","92.4 (2019)[R 16]","245.5 (2022)[R 17][R Nb 2]","n/a","235.7 (2022)[R 17][R Nb 2][R Nb 3]","116.6 (2022)[R 17][R Nb 2]","544.4 (2022)[R 18]","2,292.7 (2020)[R 19]","154.4 (2020)[R 19]","385.8 (2020)[R 19]","22.8 (2020)[R 19]","1,800 (2021)[R 20]","839.8 (2020)[R 19]","125.2 (2020)[R 19]","35.1 (2020)[R 19]","n/a[R Nb 4]","94.8 (2020)[R 19]","2,415.6 (2020)[R 19]","37 (2020)[R 19]","582.4 (2020)[R 19]","51.3 (2020)[R 19]","195.1 (2020)[R 19]","21.3 (2020)[R 19]","1,616.3 (2021)[R 21][R 22][R Nb 5]","8.7 (2020)[R 19]","n/a","159.3 (2020)[R 19]","52.5 (2020)[R 19]","n/a","135.9 (2020)[R 19]","801.3 (2020)[R 19]","208.4 (2020)[R 19]","n/a","159.9 (2020)[R 19]","139.1 (2020)[R 19]","2,834.7 (2020)[R 19]","n/a","316.3 (2020)[R 19]","2,178 (2021)","71.7 (2020)[R 19]","308.6 (2020)[R 19]","0.88 (6 days in 2020)","n/a","338.8 (2020)[R 19]","19.1 (2020)[R 19]","7 (2020)[R 19]","1,012.7 (2021)[R 23]","87.2 (2020)[R 19]","114 (2020)[R 19]","731 (2020)[R 19]","20.9 (2020)[R 19]","341 (2020)[R 19]","215.2 (2022)[R 24]","251.4 (2020)[R 25]","107 (2022)[R 26]","49.6 (2020)[R 27]","n/a","1,314 (2015)[R 28][R Nb 6]","69.9 (2022)[R 29]","89.3 (2021)[R 30]","159 (2021)[R 30]","57.9 (2021)[R 30]","1,339 (2022)[R 31][R 32][R Nb 7]","32.7 (2021)[R 30]","84.4 (2021)[R 30]","78.4 (2020)[R 3]","492.1 (2022)[R 33]","195.8 (2022)[R 34]","254 (2021)[R 35]","71.8 (2021)[R 36]","259.2 (2018)[R 37][R Nb 8]","211.6 (2021)[R 38]","0.4 (2019*)[R 39]","174.2 (2020*)[R 40]","42 (2019*)[R 39]","1,790 (2019*)[R 39]","18.3 (2018*)[R 41][R Nb 9]","173 (2019*)[R 39]","7 (2019*)[R 39]","n/a","17 (2019*)[R 39]","256 (2019*)[R 39]","22 (2019*)[R 39]","126 (2018)[R 42]","4 (2019*)[R 39]","5 (2019*)[R 39]","n/a","n/a","19.7 (2022)[R 43]","n/a","50.7 (2018)[R 44]","18 (2018)[R 45]","n/a","n/a","820 (2018*)[R 46]","18.7 (2019)[R 47]","6.5 (2019)[R 48]","15.3 (2018)[R 49][R Nb 10]","387.2 (2019)[R 50]","41.1 (2019)[R 51][R Nb 11]","320 (2018)[R 52]","42.5 (2018)[R 53]","173.3 (2019*)[R 54][R Nb 12]","24 (2019*)[R 54][R Nb 12]","114.2 (2019*)[R 54][R Nb 12]","146.4 (2019*)[R 54][R Nb 12]","487.4 (2019*)[R 54][R Nb 12]","870.4 (2016*)[R 55][R Nb 12]","226.9 (2019*)[R 54][R Nb 12]","91.7 (2019*)[R 54][R Nb 12]","1,174.9 (2019*)[R 56][R 54][R Nb 12]","2,757.4 (2019*)[R 56][R 54][R Nb 12]","95 (2019*)[R 57][R Nb 12]","243.2 (2019*)[R 54][R Nb 12]","80.6 (2019*)[R 54][R Nb 12]","17.1 (2022)[R 3]","36 (2009)[R 58]","361 (2019)[R 59][R Nb 13]","168 (2019)[R 59]","40 (2019)[R 59]","19 (2019)[R 59]","116 (2019)[R 59]","2,127.2 (2020)[R 60][R Nb 14][R Nb 15]","426.4 (2019)[R 61][R Nb 16]","122.5 (2019)[R 61][R Nb 17]","159.3 (2022)[R 62]","114.5 (2021)[R 63]","1057.5 (2022)[R 64]","109.9 (2020)[R 65]","111.3 (2019)[R 66][R Nb 18]","99 (2019)[R 67]","n/a","74 (2020)[R 68]","20 (2020-2021)[R 69]","49.9 (2020)[R 70]","110.4 (2018)[R 71]","218.2 (2019)[R 72][R Nb 19]","96.9 (2019)[R 73]","195.4 (2019)[R 74]","184.6 (2019)[R 75]","n/a","179.2 (2019)[R 76]","30.5 (2022)[R 3]","2,061.8 (2022)[R 3]","29.9 (2022)[R 3]","77.3 (2022)[R 3]","649 (2022)[R 3]","11.2 (2022)[R 3]","38.9 (2022)[R 3]","1,001.9 (2022)[R 77][R Nb 20]","371.7 (2022)[R 78]","80.3 (2022)[R 79]","571.7 (2022)[R 80]","462 (2019)[R 81][R Nb 21]","32.8 (2019)[R 82][R Nb 22]","65.4 (2019)[R 83]","695.7 (2020)[R 84]","n/a","28 (2019)[R 85]","236.9 (2020*)[R 86]","95.3 (2020)[R 87][R Nb 23]","14 (2011)[R 88]","67.4 (2020)[R 89]","91.3 (2010)[R 90]","542 (2022)[R 91]","100 (2019)[R 92]","7.5 (2018)[R 93]","231.1 (2018)[R 94]","496.1 (2018)[R 95]","113.6 (2020)[R 96]","12.7 (2019*)[R 97]","1,026 (2022*)[R 98][R Nb 24]","77.2 (2021)[R 99]","28.2 (2022)[R 17][R Nb 2]","2 (2022)[R 17][R Nb 2]","81 (2022)[R 17][R Nb 2]","103.5 (2022)[R 17][R Nb 2]","2.8 (2022)[R 17][R Nb 2]","n/a","25.8 (2022)[R 17][R Nb 2][R Nb 25]","12 (2022)[R 17][R Nb 2]","1,793.1 (2022)[R 17][R Nb 2]","3.8 (2022)[R 17][R Nb 2]","45.5 (2022)[R 17][R Nb 2]","41.2 (2022)[R 17][R Nb 2]","4.9 (2022)[R 17][R Nb 2]","39.6 (2022)[R 17][R Nb 2]","2.5 (2022)[R 17][R Nb 2]","93 (2022)[R 17][R Nb 2]","136.7 (2022)[R 3]","358 (2017)[R 100]","7.5 (2021)[R 101]"]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>City<\/th>\n      <th>Country<\/th>\n      <th>Name<\/th>\n      <th>ServiceOpened<\/th>\n      <th>LastExpanded<\/th>\n      <th>StationCount<\/th>\n      <th>Lines<\/th>\n      <th>SystemLength<\/th>\n      <th>RidershipMillions<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"City","targets":1},{"name":"Country","targets":2},{"name":"Name","targets":3},{"name":"ServiceOpened","targets":4},{"name":"LastExpanded","targets":5},{"name":"StationCount","targets":6},{"name":"Lines","targets":7},{"name":"SystemLength","targets":8},{"name":"RidershipMillions","targets":9}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Lovely! Now there’s only one problem. Notice that the <code>RidershipMillions</code> column still was not dealt with in the last command. That’s because the parenthetical statements in that column show the timeframe in which the ridership data was collected. We’d rather not get rid of this data so hastily.</p>
</section>
<section id="a-special-case" class="level5">
<h5 class="anchored" data-anchor-id="a-special-case">A Special Case</h5>
<p>The following code will snatch the data from the parenthesis and drop it in a new column called <code>RidershipMillionsDataFrom</code>. Then it will remove the excess information from <code>RidershipMillions</code> like we did above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>TidyMetroList <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  TidyMetroList <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RidershipMillionsDataFrom =</span> <span class="fu">str_extract</span>(RidershipMillions, <span class="st">"(?&lt;=</span><span class="sc">\\</span><span class="st">().+(?=</span><span class="sc">\\</span><span class="st">))"</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">RidershipMillions =</span> <span class="fu">as.numeric</span>(<span class="fu">str_replace_all</span>(RidershipMillions, <span class="st">"</span><span class="sc">\\</span><span class="st">[[</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">s+]+</span><span class="sc">\\</span><span class="st">]|(</span><span class="sc">\\</span><span class="st">().+(</span><span class="sc">\\</span><span class="st">))"</span>, <span class="st">""</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-92329b24a8584a544876" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-92329b24a8584a544876">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208"],["Algiers","Buenos Aires","Yerevan","Sydney","Vienna","Baku","Dhaka","Minsk","Brussels","Belo Horizonte","Brasília","Fortaleza","Porto Alegre","Recife","Rio de Janeiro","Salvador","São Paulo","Sofia","Montreal","Montreal","Toronto","Vancouver","Santiago","Beijing","Changchun","Changsha","Changzhou","Chengdu","Chongqing","Dalian","Dongguan","Foshan","Fuzhou","Guangzhou","Guiyang","Hangzhou","Harbin","Hefei","Hohhot","Hong Kong","Jinan","Jinhua","Kunming","Lanzhou","Luoyang","Nanchang","Nanjing","Nanning","Nantong","Ningbo","Qingdao","Shanghai","Shaoxing","Shenyang","Shenzhen","Shijiazhuang","Suzhou","Taiyuan","Taizhou","Tianjin","Ürümqi","Wenzhou","Wuhan","Wuxi","Xiamen","Xi'an","Xuzhou","Zhengzhou","Medellín","Prague","Copenhagen","Santo Domingo","Quito","Cairo","Helsinki","Lille","Lyon","Marseille","Paris","Rennes","Toulouse","Tbilisi","Berlin","Hamburg","Munich","Nuremberg","Athens","Budapest","Ahmedabad","Bangalore","Chennai","Delhi","Gurgaon","Hyderabad","Jaipur","Kanpur","Kochi","Kolkata","Lucknow","Mumbai","Nagpur","Noida","Pune","Navi Mumbai","Jakarta","Isfahan","Mashhad","Shiraz","Karaj","Tabriz","Tehran","Brescia","Catania","Genoa","Milan","Naples","Rome","Turin","Fukuoka","Hiroshima","Kobe","Kyoto","Nagoya","Osaka","Sapporo","Sendai","Tokyo","Tokyo","Tokyo","Yokohama","Yokohama","Almaty","Pyongyang","Busan","Daegu","Daejeon","Gwangju","Incheon","Seoul","Seoul","Seoul","Kuala Lumpur","Guadalajara","Mexico City","Monterrey","Amsterdam","Rotterdam","Lagos","Oslo","Lahore","Panama City","Lima","Manila","Manila","Warsaw","Lisbon","Doha","Bucharest","Kazan","Moscow","Nizhny Novgorod","Novosibirsk","Saint Petersburg","Samara","Yekaterinburg","Singapore","Barcelona","Bilbao","Madrid","Stockholm","Lausanne","Kaohsiung","Taipei","Taichung","Taoyuan","Bangkok","Bangkok","Adana","Ankara","Bursa","Istanbul","İzmir","Dnipro","Kharkiv","Kyiv","Dubai","Glasgow","London","London","Atlanta","Baltimore","Boston","Chicago","Cleveland","Honolulu","Los Angeles","Miami","New York City","New York City","New York City","Philadelphia","Philadelphia","San Francisco (Bay Area)","San Juan","Washington, D.C.","Tashkent","Caracas","Hanoi"],["Algeria","Argentina","Armenia","Australia","Austria","Azerbaijan","Bangladesh","Belarus","Belgium","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Bulgaria","Canada","Canada","Canada","Canada","Chile","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","China","Colombia","Czech Republic","Denmark","Dominican Republic","Ecuador","Egypt","Finland","France","France","France","France","France","France","Georgia","Germany","Germany","Germany","Germany","Greece","Hungary","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","India","Indonesia","Iran","Iran","Iran","Iran","Iran","Iran","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Kazakhstan","North Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Malaysia","Mexico","Mexico","Mexico","Netherlands","Netherlands","Nigeria","Norway","Pakistan","Panama","Peru","Philippines","Philippines","Poland","Portugal","Qatar","Romania","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Singapore","Spain","Spain","Spain","Sweden","Switzerland","Taiwan","Taiwan","Taiwan","Taiwan","Thailand","Thailand","Turkey","Turkey","Turkey","Turkey","Turkey","Ukraine","Ukraine","Ukraine","United Arab Emirates","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","Uzbekistan","Venezuela","Vietnam"],["Algiers Metro","Buenos Aires Underground","Yerevan Metro","Sydney Metro","Vienna U-Bahn","Baku Metro","Dhaka Metro Rail","Minsk Metro","Brussels Metro","Belo Horizonte Metro","Federal District Metro","Fortaleza Metro","Porto Alegre Metro","Recife Metro","Rio de Janeiro Metro","Salvador Metro","São Paulo Metro","Sofia Metro","Montreal Metro","Réseau express métropolitain","Toronto Subway","SkyTrain","Santiago Metro","Beijing Subway","Changchun Rail Transit","Changsha Metro","Changzhou Metro","Chengdu Metro","Chongqing Rail Transit","Dalian Metro","Dongguan Rail Transit","Foshan Metro","Fuzhou Metro","Guangzhou Metro","Guiyang Metro","Hangzhou Metro","Harbin Metro","Hefei Metro","Hohhot Metro","Mass Transit Railway","Jinan Metro","Jinhua Rail Transit","Kunming Metro","Lanzhou Metro","Luoyang Subway","Nanchang Metro","Nanjing Metro","Nanning Metro","Nantong Metro","Ningbo Rail Transit","Qingdao Metro","Shanghai Metro","Shaoxing Metro","Shenyang Metro","Shenzhen Metro","Shijiazhuang Metro","Suzhou Rail Transit","Taiyuan Metro","Taizhou Rail Transit","Tianjin Metro","Ürümqi Metro","Wenzhou Rail Transit","Wuhan Metro","Wuxi Metro","Xiamen Metro","Xi'an Metro","Xuzhou Metro","Zhengzhou Metro","Medellín Metro","Prague Metro","Copenhagen Metro","Santo Domingo Metro","Quito Metro","Cairo Metro","Helsinki Metro","Lille Metro","Lyon Metro","Marseille Metro","Paris Métro","Rennes Metro","Toulouse Metro","Tbilisi Metro","Berlin U-Bahn","Hamburg U-Bahn","Munich U-Bahn","Nuremberg U-Bahn","Athens Metro","Budapest Metro","Ahmedabad Metro","Namma Metro","Chennai Metro","Delhi Metro","Rapid Metro Gurgaon","Hyderabad Metro","Jaipur Metro","Kanpur Metro","Kochi Metro","Kolkata Metro","Lucknow Metro","Mumbai Metro","Nagpur Metro","Noida Metro","Pune Metro","Navi Mumbai Metro","Jakarta MRT","Isfahan Urban Railway","Mashhad Urban Railway","Shiraz Metro","Karaj Metro ","Tabriz Metro","Tehran Metro","Brescia Metro","Catania Metro","Genoa Metro","Milan Metro","Naples Metro","Rome Metro","Turin Metro","Fukuoka City Subway","Astram Line","Kobe Municipal Subway","Kyoto Municipal Subway","Nagoya Municipal Subway","Osaka Metro","Sapporo Municipal Subway","Sendai Subway","Toei Subway","Tokyo Metro","Rinkai Line","Yokohama Municipal Subway","Minatomirai Line","Almaty Metro","Pyongyang Metro","Busan Metro","Daegu Metro","Daejeon Metro","Gwangju Metro","Incheon Subway","Seoul Metropolitan Subway","Korail metro lines","Shinbundang Line ","Rapid KL","Guadalajara Electric Rail System","Mexico City Metro","Metrorrey","Amsterdam Metro","Rotterdam Metro","Lagos Rail Mass Transit","Oslo Metro","Lahore Metro","Panama Metro","Lima Metro","Manila Light Rail Transit System","Manila Metro Rail Transit System","Warsaw Metro","Lisbon Metro","Doha Metro","Bucharest Metro","Kazan Metro","Moscow Metro","Nizhny Novgorod Metro","Novosibirsk Metro","Saint Petersburg Metro","Samara Metro","Yekaterinburg Metro","Mass Rapid Transit","Barcelona Metro","Metro Bilbao","Madrid Metro","Stockholm Metro","Lausanne Métro","Kaohsiung Metro","Taipei Metro","Taichung Metro","Taoyuan Metro","BTS Skytrain","Metropolitan Rapid Transit","Adana Metro","Ankara Metro","Bursaray","Istanbul Metro","İzmir Metro","Dnipro Metro","Kharkiv Metro","Kyiv Metro","Dubai Metro","Glasgow Subway","London Underground","Docklands Light Railway","MARTA","Baltimore Metro SubwayLink","MBTA subway","Chicago \"L\"","Red Line ","Skyline","Metro Rail","Metrorail","New York City Subway","Staten Island Railway","PATH","SEPTA","PATCO Speedline","BART","Tren Urbano","Washington Metro","Tashkent Metro","Caracas Metro","Hanoi Metro"],[2011,1913,1981,2019,1978,1967,2022,1984,1976,1986,2001,2012,1985,1985,1979,2014,1974,1998,1966,2023,1954,1985,1975,1971,2017,2014,2019,2010,2004,2003,2016,2010,2016,1997,2017,2012,2013,2016,2019,1979,2019,2022,2012,2019,2021,2015,2005,2016,2022,2014,2015,1993,2021,2010,2004,2017,2012,2020,2022,1984,2018,2019,2004,2014,2017,2011,2019,2013,1995,1974,2002,2009,2023,1987,1982,1983,1978,1977,1900,2002,1993,1966,1902,1912,1971,1972,1869,1896,2019,2011,2015,2002,2013,2017,2015,2021,2017,1984,2017,2014,2019,2019,2022,2023,2019,2015,2011,2014,2023,2015,1999,2013,1999,1990,1964,1993,1955,2006,1981,1994,1977,1981,1957,1933,1971,1987,1960,1927,1996,1972,2004,2011,1973,1985,1997,2006,2004,1999,1974,1994,2011,1996,1994,1969,1991,1977,1968,2023,1966,2020,2014,2011,1984,1999,1995,1959,2019,1979,2005,1935,1985,1986,1955,1987,1991,1987,1924,1995,1919,1950,2008,2008,1996,2021,2017,1999,2004,2009,1997,2002,1989,2000,1995,1975,1960,2009,1896,1863,1987,1979,1983,1901,1892,1955,2023,1993,1984,1904,1925,1908,1907,1936,1972,2004,1976,1977,1983,2021],[2018,2019,1996,null,2017,2022,2023,2020,2009,2002,2020,2013,2014,2009,2016,2023,2021,2021,2007,null,2017,2016,2023,2023,2023,2023,2021,2020,2023,2023,null,2022,2023,2022,2021,2022,2023,2023,2020,2022,2021,2023,2022,2023,2021,2021,2023,2021,null,2022,2023,2021,2023,2023,2022,2021,2023,null,null,2022,2019,2023,2022,2021,2023,2023,2021,2023,2012,2015,2020,2018,null,2022,2022,2000,2023,2019,2022,2022,2007,2017,2021,2019,2010,2020,2022,2014,2022,2023,2021,2023,2017,2020,2020,null,2022,2022,2019,2023,2022,null,2023,null,null,2018,2019,2023,null,2020,2023,null,2021,2012,2023,2021,2018,2021,2023,2015,2001,2008,2011,2006,1999,2015,2002,2020,2002,2008,2008,2022,1987,2017,2015,2007,2008,2020,2022,2022,2022,2023,2020,2012,2021,2018,2023,null,2016,null,2023,2014,2021,2000,2022,2016,2019,2023,2018,2023,2018,2010,2019,2015,2012,2022,2021,2020,2019,1994,null,2012,2020,null,2023,2021,2023,2010,2023,2014,2023,2014,null,2016,2013,2021,null,2021,2011,2000,1995,2014,2017,1968,null,2000,2012,2017,2017,1937,1973,1980,2020,2005,2023,2023,2015,null],[19,78,10,13,98,27,16,30,59,19,27,20,22,28,41,20,89,47,68,5,70,53,122,370,35,135,43,284,241,99,15,61,90,254,55,254,65,136,43,99,40,32,103,27,33,94,201,93,28,116,150,403,36,111,303,60,181,23,15,181,21,36,254,80,70,191,51,157,27,58,39,33,15,74,30,60,42,29,308,28,37,23,175,93,96,49,66,48,31,65,42,231,11,58,11,9,24,40,21,40,36,21,20,11,13,20,35,23,10,18,162,17,10,8,113,27,73,23,36,22,28,31,87,100,46,29,99,142,8,40,6,11,17,108,88,22,20,56,279,86,16,128,28,163,38,39,71,5,101,26,32,26,33,13,39,50,37,57,11,207,15,14,72,10,9,134,132,42,242,100,14,37,119,18,22,60,75,13,57,39,128,17,6,30,52,53,15,272,45,38,14,51,145,18,9,16,23,424,21,13,72,13,47,16,98,48,49,12],[1,7,1,1,5,1,1,3,4,1,2,2,1,3,3,2,6,4,4,1,3,3,7,27,2,6,2,13,10,6,1,3,5,16,2,13,3,5,2,10,3,2,6,2,2,4,13,5,1,5,7,19,2,5,16,3,6,1,1,8,1,2,11,4,3,9,3,9,2,3,4,2,1,3,2,2,4,2,16,2,2,2,9,4,8,3,3,4,2,2,2,10,1,3,1,1,1,3,1,3,2,1,2,1,1,1,2,2,6,1,6,1,1,1,5,4,3,1,3,1,3,2,6,8,3,2,4,9,1,2,1,1,2,6,3,1,1,2,7,3,1,5,1,12,3,5,5,1,5,1,2,1,2,1,2,4,3,5,1,19,2,2,5,1,1,6,12,3,13,7,2,3,5,1,1,3,8,1,3,2,11,1,1,3,3,2,1,11,7,4,2,3,8,1,1,2,2,28,1,4,2,1,5,1,6,4,4,1],[18.5,56.7,12.1,36,83.3,40.7,20.1,40.8,39.9,28.1,42.4,24.1,43.8,39.5,58,34,104.4,52,69.2,16.6,70.5,79.59999999999999,143,785.7,43,207.9,54,517.8,485,237.7,37.7,112.7,143.5,617.1,75.7,516.2,82.8,176.2,49,174.7,84.3,118.5,164.3,35,43.6,128.3,498.7,128.2,39.2,185.3,311.5,795.5,57.8,163.7,547.4,76.5,249.5,23.7,52.4,288.7,27.6,116.5,460.9,114.8,98.40000000000001,311,64.40000000000001,260.6,31.3,65.40000000000001,38.2,31,22.6,93.40000000000001,43,45,34.4,22.7,226.9,22.4,28.2,27.3,155.6,106,95,38.4,91.7,39.2,37.9,73.81,54.1,351.3,12.1,67,12,8.73,26.8,47.9,22.9,46.5,38.2,29.7,23.8,11.1,15.7,20.2,37.5,32.5,27.2,17.2,274.1,13.7,8.800000000000001,7.1,104.1,30.8,60,15.1,31.4,18.4,38.1,31.2,93.3,129.9,48,28.7,109,195.1,12.2,53.4,4.1,13.4,22.5,140.1,82.90000000000001,22.6,20.1,59.7,345.3,151.7,33.4,196.2,30,200.9,40.2,41.2,102.3,13,85,27.1,37.8,34.4,37.2,16.9,41.2,44.2,76,80.09999999999999,16.8,460.5,21.4,15.9,124.8,11.6,12.7,230,128.3,45.1,293.9,108,5.9,42.7,152.9,16.7,53.1,70.09999999999999,101.4,13.5,67.40000000000001,39,199.26,19.8,7.8,38.7,67.7,89.3,10.4,402,34,76.59999999999999,24.9,63.9,165.4,31,17.4,28,39.3,399,22.5,22.2,59.1,22.9,192,17.2,208,66.5,67.2,13.1],[45.3,74,23.3,19.7,459.8,202.5,null,225.9,129.2,54.4,39.1,8.9,31.9,93.5,118.7,62,null,92.40000000000001,245.5,null,235.7,116.6,544.4,null,154.4,385.8,22.8,null,839.8,125.2,35.1,null,94.8,null,37,582.4,51.3,195.1,21.3,null,8.699999999999999,null,159.3,52.5,null,135.9,801.3,208.4,null,159.9,139.1,null,null,316.3,null,71.7,308.6,0.88,null,338.8,19.1,7,null,87.2,114,731,20.9,341,215.2,251.4,107,49.6,null,null,69.90000000000001,89.3,159,57.9,null,32.7,84.40000000000001,78.40000000000001,492.1,195.8,254,71.8,259.2,211.6,0.4,174.2,42,null,18.3,173,7,null,17,256,22,126,4,5,null,null,19.7,null,50.7,18,null,null,820,18.7,6.5,15.3,387.2,41.1,320,42.5,173.3,24,114.2,146.4,487.4,870.4,226.9,91.7,null,null,95,243.2,80.59999999999999,17.1,36,361,168,40,19,116,null,426.4,122.5,159.3,114.5,1057.5,109.9,111.3,99,null,74,20,49.9,110.4,218.2,96.90000000000001,195.4,184.6,null,179.2,30.5,null,29.9,77.3,649,11.2,38.9,null,371.7,80.3,571.7,462,32.8,65.40000000000001,695.7,null,28,236.9,95.3,14,67.40000000000001,91.3,542,100,7.5,231.1,496.1,113.6,12.7,null,77.2,28.2,2,81,103.5,2.8,null,25.8,12,null,3.8,45.5,41.2,4.9,39.6,2.5,93,136.7,358,7.5],["2019","2020","2022","2022","2019","2022",null,"2022","2022","2019","2022","2022","2022","2019","2020","2020","2022","2019","2022",null,"2022","2022","2022","2020","2020","2020","2020","2021","2020","2020","2020",null,"2020","2020","2020","2020","2020","2020","2020","2021","2020",null,"2020","2020",null,"2020","2020","2020",null,"2020","2020","2020",null,"2020","2021","2020","2020","6 days in 2020",null,"2020","2020","2020","2021","2020","2020","2020","2020","2020","2022","2020","2022","2020",null,"2015","2022","2021","2021","2021","2022","2021","2021","2020","2022","2022","2021","2021","2018","2021","2019*","2020*","2019*","2019*","2018*","2019*","2019*",null,"2019*","2019*","2019*","2018","2019*","2019*",null,null,"2022",null,"2018","2018",null,null,"2018*","2019","2019","2018","2019","2019","2018","2018","2019*","2019*","2019*","2019*","2019*","2016*","2019*","2019*","2019*","2019*","2019*","2019*","2019*","2022","2009","2019","2019","2019","2019","2019","2020","2019","2019","2022","2021","2022","2020","2019","2019",null,"2020","2020-2021","2020","2018","2019","2019","2019","2019",null,"2019","2022","2022","2022","2022","2022","2022","2022","2022","2022","2022","2022","2019","2019","2019","2020",null,"2019","2020*","2020","2011","2020","2010","2022","2019","2018","2018","2018","2020","2019*","2022*","2021","2022","2022","2022","2022","2022",null,"2022","2022","2022","2022","2022","2022","2022","2022","2022","2022","2022","2017","2021"]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>City<\/th>\n      <th>Country<\/th>\n      <th>Name<\/th>\n      <th>ServiceOpened<\/th>\n      <th>LastExpanded<\/th>\n      <th>StationCount<\/th>\n      <th>Lines<\/th>\n      <th>SystemLength<\/th>\n      <th>RidershipMillions<\/th>\n      <th>RidershipMillionsDataFrom<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"buttons.buttons.classname":"btn btn-primary","PagingTag":"button","columnDefs":[{"className":"dt-right","targets":[4,5,6,7,8,9]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"City","targets":1},{"name":"Country","targets":2},{"name":"Name","targets":3},{"name":"ServiceOpened","targets":4},{"name":"LastExpanded","targets":5},{"name":"StationCount","targets":6},{"name":"Lines","targets":7},{"name":"SystemLength","targets":8},{"name":"RidershipMillions","targets":9},{"name":"RidershipMillionsDataFrom","targets":10}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="ridership-data-analysis" class="level3">
<h3 class="anchored" data-anchor-id="ridership-data-analysis">Ridership Data Analysis</h3>
<section id="analysis" class="level5">
<h5 class="anchored" data-anchor-id="analysis">Analysis</h5>
<p>I would like to know what the average ridership is like for the five largest economies. So I start by removing any NA values with the command in the third line. Next, I group the dataset so the mutate command takes the mean of <code>RidershipMillions</code> for each country. Now I filter out the five countries of interest. The select command picks out the columns I choose and the distinct command removes superfluous rows.</p>
</section>
<section id="caveat" class="level5">
<h5 class="anchored" data-anchor-id="caveat">Caveat</h5>
<p>This data set is not a great indicator of how widely used urban rail transport is in these countries because we have no data in this dataset for the population that each metro system serves. If we did it would be very interesting to compare the average ridership divided by the average service zone population.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>MetroRidershipGraphInput <span class="ot">&lt;-</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  TidyMetroList <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"United States"</span>, <span class="st">"Germany"</span>, <span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"Japan"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RidershipMillionsAvg =</span> <span class="fu">mean</span>(RidershipMillions)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, RidershipMillionsAvg) <span class="sc">%&gt;%</span>  </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-848659a833139469badd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-848659a833139469badd">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5"],["China","Germany","India","Japan","United States"],[217.6866666666667,253.425,76.35454545454546,232.1,34.7]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>RidershipMillionsAvg<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"buttons.buttons.classname":"btn btn-primary","PagingTag":"button","columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Country","targets":1},{"name":"RidershipMillionsAvg","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="visual" class="level5">
<h5 class="anchored" data-anchor-id="visual">Visual</h5>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For the visuals I used <a href="https://observablehq.com/">Observables</a>. It is an excellent graphics generator that supplies a clear interface for creating a notebooks. If you would like to see the work I did to generate this code checkout my public <a href="https://observablehq.com/@rhys-tilford-ws/visualizing-urban-rail-transport-data">notebook</a> for this project.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" data-startfrom="250" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 249;"><span id="cb7-250"><a href="#cb7-250" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb7-251"><a href="#cb7-251" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {    </span>
<span id="cb7-252"><a href="#cb7-252" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb7-253"><a href="#cb7-253" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">5</span>)<span class="op">.</span><span class="at">map</span>[<span class="vs">`China`</span><span class="op">,</span> <span class="vs">`Germany`</span><span class="op">,</span> <span class="vs">`India`</span><span class="op">,</span> <span class="vs">`Japan`</span><span class="op">,</span> <span class="vs">`United States`</span>]<span class="op">,</span> </span>
<span id="cb7-254"><a href="#cb7-254" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#593196"</span><span class="op">,</span> <span class="st">"#009CDC"</span><span class="op">,</span> <span class="st">"#13B955"</span><span class="op">,</span> <span class="st">"#EFA31D"</span><span class="op">,</span> <span class="st">"#FC3939"</span>]</span>
<span id="cb7-255"><a href="#cb7-255" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb7-256"><a href="#cb7-256" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Average Ridership in 5 Major Countries"</span><span class="op">,</span></span>
<span id="cb7-257"><a href="#cb7-257" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Millions of Riders"</span> }<span class="op">,</span></span>
<span id="cb7-258"><a href="#cb7-258" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb7-259"><a href="#cb7-259" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(<span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"MetroRidership.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="st">"auto"</span> })<span class="op">,</span> {</span>
<span id="cb7-260"><a href="#cb7-260" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb7-261"><a href="#cb7-261" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"Average Ridership (Millions)"</span><span class="op">,</span></span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb7-265"><a href="#cb7-265" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb7-266"><a href="#cb7-266" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb7-267"><a href="#cb7-267" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
</section>
</section>
<section id="system-size-data-analysis" class="level3">
<h3 class="anchored" data-anchor-id="system-size-data-analysis">System Size Data Analysis</h3>
<section id="analysis-1" class="level5">
<h5 class="anchored" data-anchor-id="analysis-1">Analysis</h5>
<p>First, we take the dataset and filter so we only have data on the five countries we are interested in. Then we remove any NA values. Now we move to mutations. We would like to see some metric of how many stations there are on each line. We will mutate <code>StationCount</code> divided by <code>SystemLength</code> and call this ratio <code>StationDensity</code>. At this point we still have the data for each metro system in the dataset individually. We will now use <code>group_by()</code> to group the data into 5 groups corresponding to the 5 countries. Now we can run a mutate to find the averages of <code>StationCount</code>, <code>Lines</code>, <code>SystemLength</code>, and <code>StationDensity</code> for each of the 5 countries. We will select the five columns of interest and remove any duplicated rows. Now we have all the data we need to make some really intriguing graphics.</p>
</section>
<section id="caveat-1" class="level5">
<h5 class="anchored" data-anchor-id="caveat-1">Caveat</h5>
<p>Upon looking at the data again, I realize that I could have built a variable more intuitive than <code>StationDensity</code>. Station density is currently measured in <span class="math inline">\(\frac{Stations}{Kilometer}\)</span>. I think it would be easier to communicate this data if I flipped the ratio to measure in <span class="math inline">\(\frac{Kilometers}{Station}\)</span>. In this format, the data would show that average distance between 2 stations. If one were to divide this average in half we could see the average max distance a rider would have to walk in order to get to their destination from a rail station.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>MetroSizeGraphInput <span class="ot">&lt;-</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  TidyMetroList <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"United States"</span>, <span class="st">"Germany"</span>, <span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"Japan"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StationDensity =</span> StationCount<span class="sc">/</span>SystemLength) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StationCountAvg =</span> <span class="fu">mean</span>(StationCount),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">LinesAvg =</span> <span class="fu">mean</span>(Lines),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">SystemLengthAvg =</span> <span class="fu">mean</span>(SystemLength),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">StationDensityAvg =</span> <span class="fu">mean</span>(StationDensity)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, StationCountAvg, LinesAvg, SystemLengthAvg, StationDensityAvg) <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-14f6076292b87ca286b9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-14f6076292b87ca286b9">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5"],["China","Germany","India","Japan","United States"],[105.3,103.25,34.45454545454545,39.36363636363637,41.78571428571428],[5.133333333333334,6,1.909090909090909,2.909090909090909,3],[179.2766666666667,98.75,39.92818181818182,44.42727272727273,69.5],[0.6532055389809973,1.072151284065313,0.874236383279259,0.9645407271565931,0.672963528766562]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>StationCountAvg<\/th>\n      <th>LinesAvg<\/th>\n      <th>SystemLengthAvg<\/th>\n      <th>StationDensityAvg<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"buttons.buttons.classname":"btn btn-primary","PagingTag":"button","columnDefs":[{"className":"dt-right","targets":[2,3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Country","targets":1},{"name":"StationCountAvg","targets":2},{"name":"LinesAvg","targets":3},{"name":"SystemLengthAvg","targets":4},{"name":"StationDensityAvg","targets":5}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="visuals" class="level5">
<h5 class="anchored" data-anchor-id="visuals">Visuals</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" data-startfrom="309" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 308;"><span id="cb9-309"><a href="#cb9-309" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb9-310"><a href="#cb9-310" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {    </span>
<span id="cb9-311"><a href="#cb9-311" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb9-312"><a href="#cb9-312" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">5</span>)<span class="op">.</span><span class="at">map</span>[<span class="vs">`China`</span><span class="op">,</span> <span class="vs">`Germany`</span><span class="op">,</span> <span class="vs">`India`</span><span class="op">,</span> <span class="vs">`Japan`</span><span class="op">,</span> <span class="vs">`United States`</span>]<span class="op">,</span> </span>
<span id="cb9-313"><a href="#cb9-313" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#593196"</span><span class="op">,</span> <span class="st">"#009CDC"</span><span class="op">,</span> <span class="st">"#13B955"</span><span class="op">,</span> <span class="st">"#EFA31D"</span><span class="op">,</span> <span class="st">"#FC3939"</span>]</span>
<span id="cb9-314"><a href="#cb9-314" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb9-315"><a href="#cb9-315" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Average Distance Between Stations"</span><span class="op">,</span></span>
<span id="cb9-316"><a href="#cb9-316" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Kilometers per Station"</span> }<span class="op">,</span></span>
<span id="cb9-317"><a href="#cb9-317" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb9-318"><a href="#cb9-318" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(<span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"MetroSize.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="st">"auto"</span> })<span class="op">,</span> {</span>
<span id="cb9-319"><a href="#cb9-319" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb9-320"><a href="#cb9-320" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"Average Station Density"</span><span class="op">,</span></span>
<span id="cb9-321"><a href="#cb9-321" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb9-322"><a href="#cb9-322" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb9-323"><a href="#cb9-323" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb9-324"><a href="#cb9-324" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb9-325"><a href="#cb9-325" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb9-326"><a href="#cb9-326" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" data-startfrom="330" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 329;"><span id="cb10-330"><a href="#cb10-330" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb10-331"><a href="#cb10-331" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {    </span>
<span id="cb10-332"><a href="#cb10-332" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb10-333"><a href="#cb10-333" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">5</span>)<span class="op">.</span><span class="at">map</span>[<span class="vs">`China`</span><span class="op">,</span> <span class="vs">`Germany`</span><span class="op">,</span> <span class="vs">`India`</span><span class="op">,</span> <span class="vs">`Japan`</span><span class="op">,</span> <span class="vs">`United States`</span>]<span class="op">,</span> </span>
<span id="cb10-334"><a href="#cb10-334" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#593196"</span><span class="op">,</span> <span class="st">"#009CDC"</span><span class="op">,</span> <span class="st">"#13B955"</span><span class="op">,</span> <span class="st">"#EFA31D"</span><span class="op">,</span> <span class="st">"#FC3939"</span>]</span>
<span id="cb10-335"><a href="#cb10-335" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb10-336"><a href="#cb10-336" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Average System Length"</span><span class="op">,</span></span>
<span id="cb10-337"><a href="#cb10-337" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Kilometers of Rail Service"</span> }<span class="op">,</span></span>
<span id="cb10-338"><a href="#cb10-338" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb10-339"><a href="#cb10-339" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(<span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"MetroSize.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="st">"auto"</span> })<span class="op">,</span> {</span>
<span id="cb10-340"><a href="#cb10-340" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb10-341"><a href="#cb10-341" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"Average System Length"</span><span class="op">,</span></span>
<span id="cb10-342"><a href="#cb10-342" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb10-343"><a href="#cb10-343" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb10-344"><a href="#cb10-344" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb10-345"><a href="#cb10-345" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb10-346"><a href="#cb10-346" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb10-347"><a href="#cb10-347" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" data-startfrom="351" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 350;"><span id="cb11-351"><a href="#cb11-351" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb11-352"><a href="#cb11-352" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {    </span>
<span id="cb11-353"><a href="#cb11-353" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb11-354"><a href="#cb11-354" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">5</span>)<span class="op">.</span><span class="at">map</span>[<span class="vs">`China`</span><span class="op">,</span> <span class="vs">`Germany`</span><span class="op">,</span> <span class="vs">`India`</span><span class="op">,</span> <span class="vs">`Japan`</span><span class="op">,</span> <span class="vs">`United States`</span>]<span class="op">,</span> </span>
<span id="cb11-355"><a href="#cb11-355" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#593196"</span><span class="op">,</span> <span class="st">"#009CDC"</span><span class="op">,</span> <span class="st">"#13B955"</span><span class="op">,</span> <span class="st">"#EFA31D"</span><span class="op">,</span> <span class="st">"#FC3939"</span>]</span>
<span id="cb11-356"><a href="#cb11-356" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb11-357"><a href="#cb11-357" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Average Number of Stations per System"</span><span class="op">,</span></span>
<span id="cb11-358"><a href="#cb11-358" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Stations"</span> }<span class="op">,</span></span>
<span id="cb11-359"><a href="#cb11-359" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb11-360"><a href="#cb11-360" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(<span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"MetroSize.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="st">"auto"</span> })<span class="op">,</span> {</span>
<span id="cb11-361"><a href="#cb11-361" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb11-362"><a href="#cb11-362" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"Average Number of Stations"</span><span class="op">,</span></span>
<span id="cb11-363"><a href="#cb11-363" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb11-364"><a href="#cb11-364" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb11-365"><a href="#cb11-365" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb11-366"><a href="#cb11-366" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb11-367"><a href="#cb11-367" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb11-368"><a href="#cb11-368" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</div>
</div>
</section>
</section>
<section id="system-maturity-data-analysis" class="level3">
<h3 class="anchored" data-anchor-id="system-maturity-data-analysis">System Maturity Data Analysis</h3>
<section id="analysis-2" class="level5">
<h5 class="anchored" data-anchor-id="analysis-2">Analysis</h5>
<p>I would like to compare the age of these five metro systems. First I’ll filter out all the countries that are irelevant to our comparison. Next we need to find both the age of each system and the amount of time since each was expanded. For that we need to know the current date. Luckily, R has a function called <code>Sys.Date()</code> that returns the current time and date. So we need to extract the year from <code>Sys.date()</code>. We’ll use both our venerable regular expressions and the <code>stringr</code> package to accomplish this. Then we can ensure that this string of 4 numbers is converted to a number with the <code>as.numeric()</code> function. Now we mutate the difference between the column <code>ServiceOpened</code> and our current year to get a new column called <code>SystemAge</code>. We also mutate the difference between the column <code>LastExpanded</code> and our current year to get a new column called <code>YearsSinceExpansion</code>. Now we select only the columns we need and remove any NA vlaues from those columns. Next we can group by each country and find the average for each as explained <a href="#analysis-1">above</a>. Finally we select the columns <code>Country</code>, <code>AverageYearsSinceExpansion</code>, and <code>AverageSystemAge</code>. If graphing this data sounds like a problem, you would be right. We need to create a categorical variable with the levels: <code>AverageYearsSinceExpansion</code> and <code>AverageSystemAge</code>. Thank goodness for the R function <code>pivot_longer()</code>! It takes three arguments: - <code>cols</code> - A column or columns to consider in the pivoting process. - <code>names_to</code> - The name of a new column to hold the values of the column titles. (<code>AverageYearsSinceExpansion</code> and <code>AverageSystemAge</code> in our case). - <code>values_to</code> - The name of a new column to hold the values of the columns being pivoted. The resulting dataframe is just below the code chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>MetroMaturityGraphInput <span class="ot">&lt;-</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  TidyMetroList <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"United States"</span>, <span class="st">"Germany"</span>, <span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"Japan"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SystemAge =</span> (<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="fu">Sys.Date</span>(), <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}"</span>)) <span class="sc">-</span> ServiceOpened),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">YearsSinceExpansion =</span> (<span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(<span class="fu">Sys.Date</span>(), <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}"</span>)) <span class="sc">-</span> LastExpanded)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, SystemAge, YearsSinceExpansion) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">AverageSystemAge =</span> <span class="fu">mean</span>(SystemAge),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">AverageYearsSinceExpansion =</span> <span class="fu">mean</span>(YearsSinceExpansion)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, AverageYearsSinceExpansion, AverageSystemAge) <span class="sc">%&gt;%</span>  </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">"Types"</span>, <span class="at">values_to =</span> <span class="st">"Values"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-334e1f2706e3e5aa49bb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-334e1f2706e3e5aa49bb">{"x":{"style":"bootstrap","filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["China","China","Germany","Germany","India","India","Japan","Japan","United States","United States"],["AverageYearsSinceExpansion","AverageSystemAge","AverageYearsSinceExpansion","AverageSystemAge","AverageYearsSinceExpansion","AverageSystemAge","AverageYearsSinceExpansion","AverageSystemAge","AverageYearsSinceExpansion","AverageSystemAge"],[2.951219512195122,14.48780487804878,7.5,85.75,3.692307692307693,12.30769230769231,15.92307692307692,52.69230769230769,26.46666666666667,77.06666666666666]],"container":"<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>Types<\/th>\n      <th>Values<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"buttons.buttons.classname":"btn btn-primary","PagingTag":"button","columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Country","targets":1},{"name":"Types","targets":2},{"name":"Values","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="visual-1" class="level5">
<h5 class="anchored" data-anchor-id="visual-1">Visual</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" data-startfrom="413" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 412;"><span id="cb13-413"><a href="#cb13-413" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb13-414"><a href="#cb13-414" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {    </span>
<span id="cb13-415"><a href="#cb13-415" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb13-416"><a href="#cb13-416" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">5</span>)<span class="op">.</span><span class="at">map</span>[<span class="vs">`China`</span><span class="op">,</span> <span class="vs">`Germany`</span><span class="op">,</span> <span class="vs">`India`</span><span class="op">,</span> <span class="vs">`Japan`</span><span class="op">,</span> <span class="vs">`United States`</span>]<span class="op">,</span> </span>
<span id="cb13-417"><a href="#cb13-417" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> [<span class="st">"#593196"</span><span class="op">,</span> <span class="st">"#009CDC"</span><span class="op">,</span> <span class="st">"#13B955"</span><span class="op">,</span> <span class="st">"#EFA31D"</span><span class="op">,</span> <span class="st">"#FC3939"</span>]</span>
<span id="cb13-418"><a href="#cb13-418" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb13-419"><a href="#cb13-419" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Transit System Maturity"</span><span class="op">,</span></span>
<span id="cb13-420"><a href="#cb13-420" aria-hidden="true" tabindex="-1"></a>  <span class="dt">subtitle</span><span class="op">:</span> <span class="st">"Urban Rail System Maturity in 5 Major Countries"</span><span class="op">,</span></span>
<span id="cb13-421"><a href="#cb13-421" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> { <span class="dt">label</span><span class="op">:</span> <span class="st">"Years"</span> }<span class="op">,</span></span>
<span id="cb13-422"><a href="#cb13-422" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb13-423"><a href="#cb13-423" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">frame</span>({ <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.1</span> })<span class="op">,</span></span>
<span id="cb13-424"><a href="#cb13-424" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(<span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"MetroMaturity.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="st">"auto"</span> })<span class="op">,</span> {</span>
<span id="cb13-425"><a href="#cb13-425" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fx</span><span class="op">:</span> <span class="st">" "</span><span class="op">,</span></span>
<span id="cb13-426"><a href="#cb13-426" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb13-427"><a href="#cb13-427" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"Values"</span><span class="op">,</span></span>
<span id="cb13-428"><a href="#cb13-428" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"Country"</span><span class="op">,</span></span>
<span id="cb13-429"><a href="#cb13-429" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb13-430"><a href="#cb13-430" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb13-431"><a href="#cb13-431" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb13-432"><a href="#cb13-432" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb13-433"><a href="#cb13-433" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="expression">

</div>
</div>
</div>
<div class="callToAction">
<a href="../../contactMe.html"><button type="button">Contact Me</button></a>
</div>
<div id="vssue">

</div>
<p><!-- Introduce Vue first --></p>
<!-- vue runtime build (runtime only)  -->
<script src="https://unpkg.com/vue@2.7.14/dist/vue.runtime.min.js"></script>
<!-- OR: vue full build (runtime + compiler)  -->
<script src="https://unpkg.com/vue@2.7.14/dist/vue.min.js"></script>
<p><!-- Introduce Vssue after Vue --></p>
<!-- Vssue Github build -->
<script src="https://unpkg.com/vssue/dist/vssue.github.min.js"></script>
<!-- use render function for vue runtime build -->
<script>
    new Vue({
      el: '#vssue',

      render: h => h('Vssue', {
        props: {
          // here set the title of issue of current page
          title: 'Vssue_article_04',

          // here set the options for your OAuth App
          options: {
            owner: 'rctilford',
            repo: 'personal-rhys-tilford',
            clientId: '9f2e6bf389986dd77793',
            clientSecret: '667ab6fd63d934d8e8fe1c3763e98351469e1195', // only required for some of the platforms
          },
        }
      })
    })
  </script>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlBsb3QgPSBpbXBvcnQoXCJodHRwczovL2VzbS5ydW4vQG9ic2VydmFibGVocS9wbG90QDAuNi4xMVwiKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiUGxvdC5wbG90KHtcbiAgY29sb3I6IHsgICAgXG4gICAgdHlwZTogXCJjYXRlZ29yaWNhbFwiLFxuICAgIGRvbWFpbjogZDMucmFuZ2UoNSkubWFwW2BDaGluYWAsIGBHZXJtYW55YCwgYEluZGlhYCwgYEphcGFuYCwgYFVuaXRlZCBTdGF0ZXNgXSwgXG4gICAgcmFuZ2U6IFtcIiM1OTMxOTZcIiwgXCIjMDA5Q0RDXCIsIFwiIzEzQjk1NVwiLCBcIiNFRkEzMURcIiwgXCIjRkMzOTM5XCJdXG4gIH0sXG4gIHRpdGxlOiBcIkF2ZXJhZ2UgUmlkZXJzaGlwIGluIDUgTWFqb3IgQ291bnRyaWVzXCIsXG4gIHk6IHsgbGFiZWw6IFwiTWlsbGlvbnMgb2YgUmlkZXJzXCIgfSxcbiAgbWFya3M6IFtcbiAgICBQbG90LmJhclkoYXdhaXQgRmlsZUF0dGFjaG1lbnQoXCJNZXRyb1JpZGVyc2hpcC5jc3ZcIikuY3N2KHsgdHlwZWQ6IFwiYXV0b1wiIH0pLCB7XG4gICAgICB4OiBcIkNvdW50cnlcIixcbiAgICAgIHk6IFwiQXZlcmFnZSBSaWRlcnNoaXAgKE1pbGxpb25zKVwiLFxuICAgICAgZmlsbDogXCJDb3VudHJ5XCIsXG4gICAgICB0aXA6IHRydWVcbiAgICB9KSxcbiAgICBQbG90LnJ1bGVZKFswXSlcbiAgXVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlBsb3QucGxvdCh7XG4gIGNvbG9yOiB7ICAgIFxuICAgIHR5cGU6IFwiY2F0ZWdvcmljYWxcIixcbiAgICBkb21haW46IGQzLnJhbmdlKDUpLm1hcFtgQ2hpbmFgLCBgR2VybWFueWAsIGBJbmRpYWAsIGBKYXBhbmAsIGBVbml0ZWQgU3RhdGVzYF0sIFxuICAgIHJhbmdlOiBbXCIjNTkzMTk2XCIsIFwiIzAwOUNEQ1wiLCBcIiMxM0I5NTVcIiwgXCIjRUZBMzFEXCIsIFwiI0ZDMzkzOVwiXVxuICB9LFxuICB0aXRsZTogXCJBdmVyYWdlIERpc3RhbmNlIEJldHdlZW4gU3RhdGlvbnNcIixcbiAgeTogeyBsYWJlbDogXCJLaWxvbWV0ZXJzIHBlciBTdGF0aW9uXCIgfSxcbiAgbWFya3M6IFtcbiAgICBQbG90LmJhclkoYXdhaXQgRmlsZUF0dGFjaG1lbnQoXCJNZXRyb1NpemUuY3N2XCIpLmNzdih7IHR5cGVkOiBcImF1dG9cIiB9KSwge1xuICAgICAgeDogXCJDb3VudHJ5XCIsXG4gICAgICB5OiBcIkF2ZXJhZ2UgU3RhdGlvbiBEZW5zaXR5XCIsXG4gICAgICBmaWxsOiBcIkNvdW50cnlcIixcbiAgICAgIHRpcDogdHJ1ZVxuICAgIH0pLFxuICAgIFBsb3QucnVsZVkoWzBdKVxuICBdXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiUGxvdC5wbG90KHtcbiAgY29sb3I6IHsgICAgXG4gICAgdHlwZTogXCJjYXRlZ29yaWNhbFwiLFxuICAgIGRvbWFpbjogZDMucmFuZ2UoNSkubWFwW2BDaGluYWAsIGBHZXJtYW55YCwgYEluZGlhYCwgYEphcGFuYCwgYFVuaXRlZCBTdGF0ZXNgXSwgXG4gICAgcmFuZ2U6IFtcIiM1OTMxOTZcIiwgXCIjMDA5Q0RDXCIsIFwiIzEzQjk1NVwiLCBcIiNFRkEzMURcIiwgXCIjRkMzOTM5XCJdXG4gIH0sXG4gIHRpdGxlOiBcIkF2ZXJhZ2UgU3lzdGVtIExlbmd0aFwiLFxuICB5OiB7IGxhYmVsOiBcIktpbG9tZXRlcnMgb2YgUmFpbCBTZXJ2aWNlXCIgfSxcbiAgbWFya3M6IFtcbiAgICBQbG90LmJhclkoYXdhaXQgRmlsZUF0dGFjaG1lbnQoXCJNZXRyb1NpemUuY3N2XCIpLmNzdih7IHR5cGVkOiBcImF1dG9cIiB9KSwge1xuICAgICAgeDogXCJDb3VudHJ5XCIsXG4gICAgICB5OiBcIkF2ZXJhZ2UgU3lzdGVtIExlbmd0aFwiLFxuICAgICAgZmlsbDogXCJDb3VudHJ5XCIsXG4gICAgICB0aXA6IHRydWVcbiAgICB9KSxcbiAgICBQbG90LnJ1bGVZKFswXSlcbiAgXVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlBsb3QucGxvdCh7XG4gIGNvbG9yOiB7ICAgIFxuICAgIHR5cGU6IFwiY2F0ZWdvcmljYWxcIixcbiAgICBkb21haW46IGQzLnJhbmdlKDUpLm1hcFtgQ2hpbmFgLCBgR2VybWFueWAsIGBJbmRpYWAsIGBKYXBhbmAsIGBVbml0ZWQgU3RhdGVzYF0sIFxuICAgIHJhbmdlOiBbXCIjNTkzMTk2XCIsIFwiIzAwOUNEQ1wiLCBcIiMxM0I5NTVcIiwgXCIjRUZBMzFEXCIsIFwiI0ZDMzkzOVwiXVxuICB9LFxuICB0aXRsZTogXCJBdmVyYWdlIE51bWJlciBvZiBTdGF0aW9ucyBwZXIgU3lzdGVtXCIsXG4gIHk6IHsgbGFiZWw6IFwiU3RhdGlvbnNcIiB9LFxuICBtYXJrczogW1xuICAgIFBsb3QuYmFyWShhd2FpdCBGaWxlQXR0YWNobWVudChcIk1ldHJvU2l6ZS5jc3ZcIikuY3N2KHsgdHlwZWQ6IFwiYXV0b1wiIH0pLCB7XG4gICAgICB4OiBcIkNvdW50cnlcIixcbiAgICAgIHk6IFwiQXZlcmFnZSBOdW1iZXIgb2YgU3RhdGlvbnNcIixcbiAgICAgIGZpbGw6IFwiQ291bnRyeVwiLFxuICAgICAgdGlwOiB0cnVlXG4gICAgfSksXG4gICAgUGxvdC5ydWxlWShbMF0pXG4gIF1cbn0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJQbG90LnBsb3Qoe1xuICBjb2xvcjogeyAgICBcbiAgICB0eXBlOiBcImNhdGVnb3JpY2FsXCIsXG4gICAgZG9tYWluOiBkMy5yYW5nZSg1KS5tYXBbYENoaW5hYCwgYEdlcm1hbnlgLCBgSW5kaWFgLCBgSmFwYW5gLCBgVW5pdGVkIFN0YXRlc2BdLCBcbiAgICByYW5nZTogW1wiIzU5MzE5NlwiLCBcIiMwMDlDRENcIiwgXCIjMTNCOTU1XCIsIFwiI0VGQTMxRFwiLCBcIiNGQzM5MzlcIl1cbiAgfSxcbiAgdGl0bGU6IFwiVHJhbnNpdCBTeXN0ZW0gTWF0dXJpdHlcIixcbiAgc3VidGl0bGU6IFwiVXJiYW4gUmFpbCBTeXN0ZW0gTWF0dXJpdHkgaW4gNSBNYWpvciBDb3VudHJpZXNcIixcbiAgeTogeyBsYWJlbDogXCJZZWFyc1wiIH0sXG4gIG1hcmtzOiBbXG4gICAgUGxvdC5mcmFtZSh7IHN0cm9rZU9wYWNpdHk6IDAuMSB9KSxcbiAgICBQbG90LmJhclkoYXdhaXQgRmlsZUF0dGFjaG1lbnQoXCJNZXRyb01hdHVyaXR5LmNzdlwiKS5jc3YoeyB0eXBlZDogXCJhdXRvXCIgfSksIHtcbiAgICAgIGZ4OiBcIiBcIixcbiAgICAgIHg6IFwiQ291bnRyeVwiLFxuICAgICAgeTogXCJWYWx1ZXNcIixcbiAgICAgIGZpbGw6IFwiQ291bnRyeVwiLFxuICAgICAgdGlwOiB0cnVlXG4gICAgfSksXG4gICAgUGxvdC5ydWxlWShbMF0pXG4gIF1cbn0pXG4ifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../articles/article_03";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/rctilford\.github\.io\/personal-rhys-tilford\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="name">Rhys Tilford</span></p>
</div>   
    <div class="nav-footer-center">
<svg class="footer" viewbox="-790 -1245 1600 1245">
<path></path>
</svg>
</div>
    <div class="nav-footer-right">
<span class="copyright">© 2023 -
<script type="text/javascript">document.write( new Date().getFullYear() );</script>
<p></p>
</span></div>
  </div>
</footer>




</body></html>